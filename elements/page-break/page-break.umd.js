!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("lit"),require("@lrnwebcomponents/schema-behaviors/schema-behaviors.js"),require("@lrnwebcomponents/intersection-element/lib/IntersectionObserverMixin.js"),require("@lrnwebcomponents/i18n-manager/lib/I18NMixin.js"),require("@lrnwebcomponents/simple-icon/lib/simple-icon-button-lite.js"),require("@lrnwebcomponents/simple-icon/lib/simple-icons.js"),require("@lrnwebcomponents/simple-icon/lib/simple-iconset.js")):"function"==typeof define&&define.amd?define(["exports","lit","@lrnwebcomponents/schema-behaviors/schema-behaviors.js","@lrnwebcomponents/intersection-element/lib/IntersectionObserverMixin.js","@lrnwebcomponents/i18n-manager/lib/I18NMixin.js","@lrnwebcomponents/simple-icon/lib/simple-icon-button-lite.js","@lrnwebcomponents/simple-icon/lib/simple-icons.js","@lrnwebcomponents/simple-icon/lib/simple-iconset.js"],t):t((e="undefined"!=typeof globalThis?globalThis:e||self).PageBreak={},e.lit,e.schemaBehaviors_js,e.IntersectionObserverMixin_js,e.I18NMixin_js,null,null,e.simpleIconset_js)}(this,(function(e,t,n,r,i,a,o,c){"use strict";function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach((function(t){b(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function u(){
/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */
u=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r="function"==typeof Symbol?Symbol:{},i=r.iterator||"@@iterator",a=r.asyncIterator||"@@asyncIterator",o=r.toStringTag||"@@toStringTag";function c(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(e){c=function(e,t,n){return e[t]=n}}function l(e,t,n,r){var i=t&&t.prototype instanceof p?t:p,a=Object.create(i.prototype),o=new O(r||[]);return a._invoke=function(e,t,n){var r="suspendedStart";return function(i,a){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===i)throw a;return _()}for(n.method=i,n.arg=a;;){var o=n.delegate;if(o){var c=w(o,n);if(c){if(c===h)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var l=s(e,t,n);if("normal"===l.type){if(r=n.done?"completed":"suspendedYield",l.arg===h)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(r="completed",n.method="throw",n.arg=l.arg)}}}(e,n,o),a}function s(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}e.wrap=l;var h={};function p(){}function f(){}function d(){}var g={};c(g,i,(function(){return this}));var b=Object.getPrototypeOf,m=b&&b(b(S([])));m&&m!==t&&n.call(m,i)&&(g=m);var v=d.prototype=p.prototype=Object.create(g);function y(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function k(e,t){function r(i,a,o,c){var l=s(e[i],e,a);if("throw"!==l.type){var u=l.arg,h=u.value;return h&&"object"==typeof h&&n.call(h,"__await")?t.resolve(h.__await).then((function(e){r("next",e,o,c)}),(function(e){r("throw",e,o,c)})):t.resolve(h).then((function(e){u.value=e,o(u)}),(function(e){return r("throw",e,o,c)}))}c(l.arg)}var i;this._invoke=function(e,n){function a(){return new t((function(t,i){r(e,n,t,i)}))}return i=i?i.then(a,a):a()}}function w(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,w(e,t),"throw"===t.method))return h;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return h}var r=s(n,e.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,h;var i=r.arg;return i?i.done?(t[e.resultName]=i.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,h):i:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,h)}function x(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function E(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function O(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(x,this),this.reset(!0)}function S(e){if(e){var t=e[i];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,a=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return a.next=a}}return{next:_}}function _(){return{value:void 0,done:!0}}return f.prototype=d,c(v,"constructor",d),c(d,"constructor",f),f.displayName=c(d,o,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===f||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,d):(e.__proto__=d,c(e,o,"GeneratorFunction")),e.prototype=Object.create(v),e},e.awrap=function(e){return{__await:e}},y(k.prototype),c(k.prototype,a,(function(){return this})),e.AsyncIterator=k,e.async=function(t,n,r,i,a){void 0===a&&(a=Promise);var o=new k(l(t,n,r,i),a);return e.isGeneratorFunction(n)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},y(v),c(v,o,"Generator"),c(v,i,(function(){return this})),c(v,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},e.values=S,O.prototype={constructor:O,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(E),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return o.type="throw",o.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],o=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var c=n.call(a,"catchLoc"),l=n.call(a,"finallyLoc");if(c&&l){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc<=this.prev&&n.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var a=i;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var o=a?a.completion:{};return o.type=e,o.arg=t,a?(this.method="next",this.next=a.finallyLoc,h):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),h},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),E(n),h}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;E(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:S(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),h}},e}function h(e,t,n,r,i,a,o){try{var c=e[a](o),l=c.value}catch(e){return void n(e)}c.done?t(l):Promise.resolve(l).then(r,i)}function p(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var a=e.apply(t,n);function o(e){h(a,r,i,o,c,"next",e)}function c(e){h(a,r,i,o,c,"throw",e)}o(void 0)}))}}function f(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function d(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function g(e,t,n){return t&&d(e.prototype,t),n&&d(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function b(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function m(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&y(e,t)}function v(e){return v=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},v(e)}function y(e,t){return y=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},y(e,t)}function k(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function w(e,t,n){return w=k()?Reflect.construct.bind():function(e,t,n){var r=[null];r.push.apply(r,t);var i=new(Function.bind.apply(e,r));return n&&y(i,n.prototype),i},w.apply(null,arguments)}function x(e){var t="function"==typeof Map?new Map:void 0;return x=function(e){if(null===e||(n=e,-1===Function.toString.call(n).indexOf("[native code]")))return e;var n;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,r)}function r(){return w(e,arguments,v(this).constructor)}return r.prototype=Object.create(e.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),y(r,e)},x(e)}function E(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function O(e,t){if(t&&("object"==typeof t||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return E(e)}function S(e){var t=k();return function(){var n,r=v(e);if(t){var i=v(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return O(this,n)}}function _(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=v(e)););return e}function P(){return P="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=_(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(arguments.length<3?e:n):i.value}},P.apply(this,arguments)}function j(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}function M(e){return function(e){if(Array.isArray(e))return L(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return L(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return L(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function L(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var T=function(e){m(n,e);var t=S(n);function n(){var e;return f(this,n),(e=t.call(this)).target=null,e.breaks=[],e._timer=0,e}return g(n,[{key:"getParent",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=null,r=null;return this.target&&("indent"===t?this.target.querySelectorAll("page-break").forEach((function(t){t===e&&(r=n),n=t})):"outdent"===t?this.target.querySelector('page-break[path="'.concat(e.parent,'"]'))&&(r=this.target.querySelector('page-break[path="'.concat(e.parent,'"]')),this.target.querySelector('page-break[path="'.concat(r.parent,'"]'))&&(r=this.target.querySelector('page-break[path="'.concat(r.parent,'"]'))),r=null):this.target.querySelector('page-break[path="'.concat(e.parent,'"]'))&&(r=this.target.querySelector('page-break[path="'.concat(e.parent,'"]')))),r}},{key:"elementsBetween",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"page-break",n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"nextElementSibling",i=[];for(e=e[r];e&&!e.matches(t);)!n||e.matches(n)?(i.push(e),e=e[r]):e=e[r];return i}},{key:"associatedPageBreak",value:function(e){for(e=e.previousElementSibling;e&&!e.matches("page-break");)e=e.previousElementSibling;return e}},{key:"betweenElementsQuery",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"all",n=[];switch(t){case"headings":this.breaks.forEach((function(t){n=[].concat(M(n),M(e.elementsBetween(t,"page-break","h1,h2,h3,h4,h5,h6")))}));break;case"noheadings":this.breaks.forEach((function(t){n=[].concat(M(n),M(e.elementsBetween(t,"page-break",":not(h1,h2,h3,h4,h5,h6)")))}));break;case"titles":this.breaks.forEach((function(t){n=[].concat(M(n),M(e.elementsBetween(t,"page-break","[data-page-break-title]")))}));break;case"notitles":this.breaks.forEach((function(t){n=[].concat(M(n),M(e.elementsBetween(t,"page-break",":not([data-page-break-title])")))}));break;case"all":this.breaks.forEach((function(t){n=[].concat(M(n),M(e.elementsBetween(t)))}))}return n}},{key:"connectedCallback",value:function(){window.addEventListener("page-break-registration",this.registerPageBreak.bind(this))}},{key:"disconnectedCallback",value:function(){window.removeEventListener("page-break-registration",this.registerPageBreak.bind(this))}},{key:"updateVisibleAsActive",value:function(){clearTimeout(this._timer),this._timer=setTimeout((function(){document.querySelector("page-break[element-visible]")&&window.history.pushState({},null,document.querySelector("page-break[element-visible]").path)}),500)}},{key:"registerPageBreak",value:function(e){var t=this;"add"===e.detail.action?this.breaks.find((function(t){return t===e.detail.value}))||this.breaks.push(e.detail.value):this.breaks.map((function(n,r){n===e.detail.value&&t.breaks.splice(r,1)})),1===this.breaks.length?this.target=e.detail.value.parentNode:0===this.breaks.length&&(this.target=null),this.__lock||(this.__lock=!0,setTimeout((function(){if(t.breaks.forEach((function(e){t.elementsBetween(e,"page-break","h1,h2,h3,h4,h5,h6").forEach((function(t){var n=(t.getAttribute("data-original-level")?new Number(t.getAttribute("data-original-level").replace("H","")):new Number(t.tagName.replace("H","")))+e.depth;n=n>6?6:n;var r=document.createElement("h".concat(n));r.setAttribute("data-original-level",t.tagName);for(var i=0,a=t.attributes.length;i<a;++i)r.setAttribute(t.attributes.item(i).nodeName,t.attributes.item(i).nodeValue);r.innerHTML=t.innerHTML,t.parentNode.replaceChild(r,t),e.target=r}))})),t.target&&t.target.children&&t.target.children.length>0)for(var e=[],n=t.target.querySelectorAll("page-break"),r=0;r<n.length;r++){var i=n[r];if(e.length>0){if(i.parent&&-1!==e.indexOf(i.parent))for(;-1!==e.indexOf(i.parent);)e.shift();else if(i.parent&&-1===e.indexOf(i.parent));else for(;e.length>0;)e.shift();var a=0;0!==r&&i.parent&&t.target.querySelector('page-break[path="'.concat(i.parent,'"]'))&&(a=t.target.querySelector('page-break[path="'.concat(i.parent,'"]')).depth+1),i.depth=a,r!=n.length&&n[r+1]&&n[r+1].parent===i.path&&i.parent&&e.unshift(i.parent)}}t.__lock=!1}),10))}}]),n}(x(HTMLElement));window.PageBreakManager=window.PageBreakManager||{},window.PageBreakManager.requestAvailability=function(){return window.PageBreakManager.instance||(window.PageBreakManager.instance=document.createElement("page-break-manager"),document.body.appendChild(window.PageBreakManager.instance)),window.PageBreakManager.instance},customElements.define("page-break-manager",T);var N,A,I,C=window.PageBreakManager.requestAvailability(),H=function(e){m(a,e);var n,r,i=S(a);function a(){var e;return f(this,a),(e=i.call(this)).status="",e.t={newPage:"New page",pageBreak:"Page break",pageDetails:"Page details",clickToUnlock:"Click to unlock",noParent:"No parent",toggleLock:"Toggle lock",togglePublished:"Toggle published"},e.registerLocalization({context:E(e),localesPath:new URL("./locales","undefined"==typeof document&&"undefined"==typeof location?new(require("url").URL)("file:"+__filename).href:"undefined"==typeof document?location.href:document.currentScript&&document.currentScript.src||new URL("page-break.umd.js",document.baseURI).href).href,locales:["es"]}),e.title=e.t.newPage,e.slug="",e.published=!1,e.target=null,e.locked=!1,e.order=null,e.depth=0,e.itemId=null,e._haxState=!1,e.IORemoveOnVisible=!1,e.IODelay=250,e.remoteHeadingobserver=new MutationObserver((function(){e.title!=e.target.innerText&&(e.__moUpdate=!0,e.title=e.target.innerText)})),e.breakType="node",e}return g(a,[{key:"connectedCallback",value:function(){var e=this;P(v(a.prototype),"connectedCallback",this).call(this),"node"===this.breakType&&(this.nextElementSibling&&this.nextElementSibling.tagName&&["H1","H2","H3","H4","H5","H6"].includes(this.nextElementSibling.tagName)?(this.title=this.nextElementSibling.innerText,this.target=this.nextElementSibling,this.setupTargetData(this.target)):setTimeout((function(){if(null===e.target)if(e.nextElementSibling&&e.nextElementSibling.tagName&&["H1","H2","H3","H4","H5","H6"].includes(e.nextElementSibling.tagName))e.title=e.nextElementSibling.innerText,e.target=e.nextElementSibling,e.setupTargetData(e.target);else{var t=0===e.depth?"h2":"h".concat(e.depth+2),n=document.createElement(t);n.setAttribute("data-original-level","H2"),n.innerText=e.title,e.parentNode.insertBefore(n,e.nextElementSibling),setTimeout((function(){e.setupTargetData(e.nextElementSibling)}),100)}}),0)),window.dispatchEvent(new CustomEvent("page-break-registration",{composed:!0,bubbles:!0,cancelable:!0,detail:{value:this,action:"add"}})),window.dispatchEvent(new CustomEvent("page-break-change",{composed:!0,bubbles:!0,cancelable:!0,detail:{value:this}}))}},{key:"disconnectedCallback",value:function(){window.dispatchEvent(new CustomEvent("page-break-registration",{detail:{value:this,action:"remove"}})),window.dispatchEvent(new CustomEvent("page-break-change",{composed:!0,bubbles:!0,cancelable:!0,detail:{value:this}})),this.remoteHeadingobserver.disconnect(),P(v(a.prototype),"disconnectedCallback",this).call(this)}},{key:"setupTargetData",value:function(e){this.target&&this.remoteHeadingobserver.disconnect(),this.target=e,this._haxSibling=this,this.remoteHeadingobserver.observe(this.target,{characterData:!0,childList:!0,subtree:!0})}},{key:"updated",value:function(e){var t=this;P(v(a.prototype),"updated",this)&&P(v(a.prototype),"updated",this).call(this,e),e.forEach((function(e,n){var r;("schemaResourceID"===n&&null==t.itemId&&void 0!==e&&(t.itemId=t.schemaResourceID.replace("#","item-")),"elementVisible"===n&&t.elementVisible&&t.itemId&&t.shadowRoot&&setTimeout((function(){C.updateVisibleAsActive()}),0),t.locked&&"locked"===n?C.elementsBetween(t).forEach((function(e){e.setAttribute("data-hax-lock","data-hax-lock")})):!t.locked&&"locked"===n&&e&&C.elementsBetween(t).forEach((function(e){e.removeAttribute("data-hax-lock")})),t._ceMenu&&["locked","parent","published"].includes(n)&&t._updateHAXCEMenu(),["title","parent","slug"].includes(n)&&window.dispatchEvent(new CustomEvent("page-break-change",{composed:!0,bubbles:!0,cancelable:!0,detail:{value:t}})),"node"===t.breakType&&t.target&&("title"===n&&t[n]&&(t.__moUpdate?t.__moUpdate=!1:t.title!=t.target.innerText&&(t.target.innerText=t.title)),!t._haxState&&"depth"===n&&t.depth>=0&&C.elementsBetween(t,"page-break","h1,h2,h3,h4,h5,h6").forEach((function(e){var n=(e.getAttribute("data-original-level")?new Number(e.getAttribute("data-original-level").replace("H","")):new Number(e.tagName.replace("H","")))+t.depth;n=n>6?6:n;var r=document.createElement("h".concat(n));r.setAttribute("data-original-level",e.tagName);for(var i=0,a=e.attributes.length;i<a;++i)r.setAttribute(e.attributes.item(i).nodeName,e.attributes.item(i).nodeValue);r.innerHTML=e.innerHTML,t.setupTargetData(r),e.parentNode.replaceChild(r,e)})),"_haxState"===n&&void 0!==e&&(t._haxState?C.elementsBetween(t,"page-break","h1,h2,h3,h4,h5,h6").forEach((function(e){if(e.getAttribute("data-original-level")){for(var n=new Number(e.getAttribute("data-original-level").replace("H","")),r=document.createElement("h".concat(n)),i=0,a=e.attributes.length;i<a;++i)r.setAttribute(e.attributes.item(i).nodeName,e.attributes.item(i).nodeValue);r.innerHTML=e.innerHTML,e.parentNode.replaceChild(r,e),t.setupTargetData(r)}})):C.elementsBetween(t,"page-break","h1,h2,h3,h4,h5,h6").forEach((function(e){var n=(e.getAttribute("data-original-level")?new Number(e.getAttribute("data-original-level").replace("H","")):new Number(e.tagName.replace("H","")))+t.depth;n=n>6?6:n;var r=document.createElement("h".concat(n));r.setAttribute("data-original-level",e.tagName);for(var i=0,a=e.attributes.length;i<a;++i)r.setAttribute(e.attributes.item(i).nodeName,e.attributes.item(i).nodeValue);r.innerHTML=e.innerHTML,e.parentNode.replaceChild(r,e),t.setupTargetData(r)})))),"breakType"===n||"t"===n)&&("node"===t[n]?(r=c.SimpleIconsetStore.getIcon("editor:format-page-break"),t.shadowRoot.querySelector("style").innerHTML='\n          :host([data-hax-ray]:hover) .mid::before {\n            content: "'.concat(t.t.pageBreak,'";\n          }')):(r=c.SimpleIconsetStore.getIcon("hax:page-details"),t.shadowRoot.querySelector("style").innerHTML='\n          :host([data-hax-ray]:hover) .mid::before {\n            content: "'.concat(t.t.pageDetails,'";\n          }')),t.style.backgroundImage='url("'.concat(r,'")'))}))}},{key:"firstUpdated",value:function(e){P(v(a.prototype),"firstUpdated",this)&&P(v(a.prototype),"firstUpdated",this).call(this,e),null!=this.itemId&&(this.schemaResourceID=this.itemId)}},{key:"render",value:function(){return t.html(N||(N=j(['\n      <style></style>\n      <a .href="','" .name="#','" class="sr-only"\n        >','</a\n      >\n      <hr class="mid" />\n      ',"\n    "])),this.slug,this.itemId,this.title,this.locked?t.html(A||(A=j(['<simple-icon-button-lite\n            @click="','"\n            icon="icons:lock"\n            title="','"\n          ></simple-icon-button-lite>'])),this.haxClickLockInPage,this.t.clickToUnlock):"")}},{key:"haxHooks",value:function(){return{editModeChanged:"haxeditModeChanged",inlineContextMenu:"haxinlineContextMenu",activeElementChanged:"haxactiveElementChanged",setupActiveElementForm:"haxsetupActiveElementForm",preProcessInsertContent:"haxpreProcessInsertContent",trayDragNDropToNode:"haxtrayDragNDropToNode"}}},{key:"haxpreProcessInsertContent",value:(r=p(u().mark((function e(t,n){var r,i;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(r=n)||!r.parentNode){e.next=7;break}for(;"HAX-BODY"!==r.parentNode.tagName;)r=r.parentNode;return e.next=5,C.associatedPageBreak(r);case 5:(i=e.sent)&&(t.properties.parent=i.parent,t.properties.order=i.order+1,t.properties.published=i.published,t.properties.locked=i.locked);case 7:return e.abrupt("return",t);case 8:case"end":return e.stop()}}),e)}))),function(e,t){return r.apply(this,arguments)})},{key:"haxtrayDragNDropToNode",value:(n=p(u().mark((function e(t){var n,r;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(n=t;"HAX-BODY"!==n.parentNode.tagName;)n=n.parentNode;return e.next=4,C.associatedPageBreak(n);case 4:(r=e.sent)&&(t.parent=r.parent,t.order=r.order+1,t.published=r.published,t.locked=r.locked);case 6:case"end":return e.stop()}}),e)}))),function(e){return n.apply(this,arguments)})},{key:"haxsetupActiveElementForm",value:function(e){var t=this;if(window.HAXCMS){var n=window.HAXCMS.requestAvailability().store.getManifestItems(!0),r=[{text:"-- ".concat(this.t.noParent," --"),value:null}];n.forEach((function(e){e.id!=t.itemId&&function(){for(var t=e,i="- ";t&&null!=t.parent;)(t=n.find((function(e){return e.id==t.parent})))&&(i="--"+i);r.push({text:i+e.title,value:e.id})}()})),e.settings.configure.forEach((function(t,n){"parent"===t.property&&(e.settings.configure[n].inputMethod="select",e.settings.configure[n].itemsList=r)}))}}},{key:"haxactiveElementChanged",value:function(e,t){!t&&this._ceMenu&&("site"===this.breakType?(this._ceMenu.disableOps=!1,this._ceMenu.canMoveElement=!0,this._ceMenu.insertAbove=!0):this._ceMenu.disableDuplicate=!1)}},{key:"haxeditModeChanged",value:function(e){this._haxState=e}},{key:"haxinlineContextMenu",value:function(e){this._ceMenu=e,this._updateHAXCEMenu(),"site"===this.breakType?(this._ceMenu.disableOps=!0,this._ceMenu.canMoveElement=!1,this._ceMenu.insertAbove=!1):this._ceMenu.disableDuplicate=!0}},{key:"_updateHAXCEMenu",value:function(){this._ceMenu.ceButtons=[{icon:this.locked?"icons:lock":"icons:lock-open",callback:"haxClickInlineLock",label:this.t.toggleLock},{icon:this.published?"lrn:view":"lrn:view-off",callback:"haxClickInlinePublished",label:this.t.togglePublished}]}},{key:"haxClickLockInPage",value:function(e){this.locked=!this.locked,window.dispatchEvent(new CustomEvent("hax-refresh-tray-form",{}))}},{key:"haxClickInlineLock",value:function(e){return this.locked=!this.locked,!0}},{key:"haxClickInlinePublished",value:function(e){return this.published=!this.published,!0}}],[{key:"tag",get:function(){return"page-break"}},{key:"properties",get:function(){return s(s({},P(v(a),"properties",this)||{}),{},{order:{type:Number},title:{type:String,reflect:!0},slug:{type:String},parent:{type:String,reflect:!0},published:{type:Boolean,reflect:!0},locked:{type:Boolean,reflect:!0},depth:{type:Number,reflect:!0},itemId:{type:String,attribute:"item-id",reflect:!0},breakType:{type:String,attribute:"break-type"},status:{type:String},_haxState:{type:Boolean}})}},{key:"styles",get:function(){return[t.css(I||(I=j(["\n        :host {\n          display: block;\n          opacity: 0;\n          height: 1px;\n        }\n        :host([data-hax-ray]) {\n          display: block;\n          margin: 20px 0;\n          padding: 20px;\n          opacity: 0.2;\n          background-position: center;\n          background-repeat: no-repeat;\n          transition: all 0.2s linear;\n        }\n        .mid {\n          border: none;\n          border-top: 2px solid #cccccc;\n          overflow: visible;\n          margin: 4px 0 0 0;\n          padding: 0;\n          height: 0;\n        }\n        :host([data-hax-ray]:hover) {\n          opacity: 1;\n        }\n        :host([data-hax-ray]:hover) .mid::before {\n          font-weight: bold;\n          color: #000000;\n          background-color: #ffffff;\n          font-size: 16px;\n          left: calc(50% - 2.5em);\n          top: -16px;\n          position: relative;\n          height: 0;\n          line-height: 36px;\n        }\n        simple-icon-button-lite {\n          float: right;\n          color: #000000;\n          --simple-icon-width: 36px;\n          --simple-icon-height: 36px;\n          margin-top: -28px;\n          margin-right: -46px;\n        }\n        .sr-only {\n          position: absolute;\n          left: -10000px;\n          top: auto;\n          width: 1px;\n          height: 1px;\n          overflow: hidden;\n        }\n      "])))]}},{key:"haxProperties",get:function(){return new URL("./lib/page-break.haxProperties.json","undefined"==typeof document&&"undefined"==typeof location?new(require("url").URL)("file:"+__filename).href:"undefined"==typeof document?location.href:document.currentScript&&document.currentScript.src||new URL("page-break.umd.js",document.baseURI).href).href}}]),a}(r.IntersectionObserverMixin(i.I18NMixin(n.SchemaBehaviors(t.LitElement))));customElements.define(H.tag,H),e.PageBreak=H,Object.defineProperty(e,"__esModule",{value:!0})}));
