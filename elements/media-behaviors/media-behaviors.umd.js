!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t((e="undefined"!=typeof globalThis?globalThis:e||self).MediaBehaviors={})}(this,(function(e){"use strict";function t(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var o=0;o<t.length;o++){var r=t[o];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(i=r.key,n=void 0,"symbol"==typeof(n=function(e,t){if("object"!=typeof e||null===e)return e;var o=e[Symbol.toPrimitive];if(void 0!==o){var r=o.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(i,"string"))?n:String(n)),r)}var i,n}function r(e){return r=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},r(e)}function i(e,t){return i=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},i(e,t)}function n(e,t){if(t&&("object"==typeof t||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function c(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var o,i=r(e);if(t){var c=r(this).constructor;o=Reflect.construct(i,arguments,c)}else o=i.apply(this,arguments);return n(this,o)}}window.MediaBehaviors=window.MediaBehaviors||{},window.MediaBehaviors.Video={_sourceIsIframe:function(e){return"local"!=this.getVideoType(e)},cleanVideoSource:function(e,t){if("local"!=t&&"string"==typeof e){var o=e.split("?"),r="";if(e=o[0],2==o.length){var i=o[1].split("&"),n=i[0].split("="),c=Array.isArray(i.shift())?i.shift().join(""):i.shift();if("v"==n[0]){var a=void 0!==c&&""!==c?"?"+c:"";r=n[1]+a}}if(-1==e.indexOf("player.vimeo.com")&&-1!=e.indexOf("vimeo.com"))return-1!=e.indexOf("/videos/")&&(e=e.replace("/videos/","/")),e.replace("vimeo.com/","player.vimeo.com/video/");if(-1!=e.indexOf("youtube.com/watch"))return e.replace("youtube.com/watch","youtube.com/embed/")+r;if(-1!=e.indexOf("youtube-no-cookie.com/"))return e.replace("youtube-no-cookie.com/","youtube.com/")+r;if(-1!=e.indexOf("youtu.be"))return e.replace("youtu.be/","www.youtube.com/embed/")+r;if(-1!=e.indexOf("player.twitch.tv/")){if(o[1])return"".concat(e,"?").concat(o[1].replace("&parent=www.example.com",""));var u=e.replace("&parent=www.example.com","").split("/");return"https://player.twitch.tv/?channel=".concat(u.pop())}if(-1!=e.indexOf("twitch.tv/videos/")){var f=e.replace("&parent=www.example.com","").split("/");return"https://player.twitch.tv/?video=".concat(f.pop())}if(-1!=e.indexOf("twitch.tv/")){var p=e.replace("&parent=www.example.com","").split("/");return"https://player.twitch.tv/?channel=".concat(p.pop())}if(-1!=e.indexOf("sketchfab.com")&&-1==e.indexOf("/embed"))return e+"/embed"}return e},getVideoType:function(e){var t=["aac","flac","mov","mp3","mp4","oga","ogg","ogv","wav","webm"],o=!1;if(-1!=e.indexOf("vimeo"))return"vimeo";if(-1!=e.indexOf("youtube")||-1!=e.indexOf("youtu.be"))return"youtube";if(-1!=e.indexOf("sketchfab.com"))return"sketchfab";if(-1!=e.indexOf("twitch.tv"))return"twitch";for(var r=0;r<t.length;r++)!o&&e.toLowerCase().indexOf("."+t[r])>-1&&(o=!0);return o?"local":"external"}};e.MediaBehaviorsVideo=function(e){return function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&i(e,t)}(f,e);var r,n,a,u=c(f);function f(){return t(this,f),u.apply(this,arguments)}return r=f,(n=[{key:"_sourceIsIframe",value:function(e){return"local"!=this.getVideoType(e)}},{key:"cleanVideoSource",value:function(e,t){if("local"!=t){var o=e.split("?"),r="";if(e=o[0],2==o.length){var i=o[1].split("&"),n=i[0].split("="),c=Array.isArray(i.shift())?i.shift().join(""):i.shift();if("v"==n[0]){var a=void 0!==c&&""!==c?"?"+c:"";r=n[1]+a}}if(-1==e.indexOf("player.vimeo.com")&&-1!=e.indexOf("vimeo.com"))return-1!=e.indexOf("/videos/")&&(e=e.replace("/videos/","/")),e.replace("vimeo.com/","player.vimeo.com/video/");if(-1!=e.indexOf("youtube.com/watch"))return e.replace("youtube.com/watch","youtube.com/embed/")+r;if(-1!=e.indexOf("player.twitch.tv/")){if(o[1])return"".concat(e,"?").concat(o[1].replace("&parent=www.example.com",""));var u=e.replace("&parent=www.example.com","").split("/");return"https://player.twitch.tv/?channel=".concat(u.pop())}if(-1!=e.indexOf("twitch.tv/videos/")){var f=e.replace("&parent=www.example.com","").split("/");return"https://player.twitch.tv/?video=".concat(f.pop())}if(-1!=e.indexOf("twitch.tv/")){var p=e.replace("&parent=www.example.com","").split("/");return"https://player.twitch.tv/?channel=".concat(p.pop())}if(-1!=e.indexOf("youtube-no-cookie.com/"))return e.replace("youtube-no-cookie.com/","youtube.com/")+r;if(-1!=e.indexOf("youtu.be"))return e.replace("youtu.be/","www.youtube.com/embed/")+r;if(-1!=e.indexOf("sketchfab.com")&&-1==e.indexOf("/embed"))return e+"/embed"}return e}},{key:"getVideoType",value:function(e){var t=["aac","flac","mov","mp3","mp4","oga","ogg","ogv","wav","webm"],o=!1;if(-1!=e.indexOf("vimeo"))return"vimeo";if(-1!=e.indexOf("youtube")||-1!=e.indexOf("youtu.be"))return"youtube";if(-1!=e.indexOf("sketchfab.com"))return"sketchfab";if(-1!=e.indexOf("twitch.tv"))return"twitch";for(var r=0;r<t.length;r++)!o&&e.toLowerCase().indexOf("."+t[r])>-1&&(o=!0);return o?"local":"external"}}])&&o(r.prototype,n),a&&o(r,a),Object.defineProperty(r,"prototype",{writable:!1}),f}(e)},Object.defineProperty(e,"__esModule",{value:!0})}));
