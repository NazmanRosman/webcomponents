!function(e,n){"object"==typeof exports&&"undefined"!=typeof module?n(exports,require("lit"),require("web-dialog/index.js"),require("@lrnwebcomponents/simple-icon/lib/simple-icons.js"),require("@lrnwebcomponents/simple-icon/lib/simple-icon-lite.js"),require("@lrnwebcomponents/simple-fields/lib/simple-fields-field.js"),require("@lrnwebcomponents/simple-filter/simple-filter.js"),require("@lrnwebcomponents/simple-fields/lib/simple-tag.js")):"function"==typeof define&&define.amd?define(["exports","lit","web-dialog/index.js","@lrnwebcomponents/simple-icon/lib/simple-icons.js","@lrnwebcomponents/simple-icon/lib/simple-icon-lite.js","@lrnwebcomponents/simple-fields/lib/simple-fields-field.js","@lrnwebcomponents/simple-filter/simple-filter.js","@lrnwebcomponents/simple-fields/lib/simple-tag.js"],n):n((e="undefined"!=typeof globalThis?globalThis:e||self).SuperDaemon={},e.lit,null,null,null,null,e.simpleFilter_js)}(this,(function(e,n,t,i,o,r,l){"use strict";function a(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);n&&(i=i.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,i)}return t}function s(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?a(Object(t),!0).forEach((function(n){u(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):a(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function d(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}function c(e,n){for(var t=0;t<n.length;t++){var i=n[t];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,x(i.key),i)}}function p(e,n,t){return n&&c(e.prototype,n),t&&c(e,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function u(e,n,t){return(n=x(n))in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function h(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(n&&n.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),n&&m(e,n)}function f(e){return f=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},f(e)}function m(e,n){return m=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,n){return e.__proto__=n,e},m(e,n)}function y(e,n){if(n&&("object"==typeof n||"function"==typeof n))return n;if(void 0!==n)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function b(e){var n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var t,i=f(e);if(n){var o=f(this).constructor;t=Reflect.construct(i,arguments,o)}else t=i.apply(this,arguments);return y(this,t)}}function w(e,n){for(;!Object.prototype.hasOwnProperty.call(e,n)&&null!==(e=f(e)););return e}function g(){return g="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,n,t){var i=w(e,n);if(i){var o=Object.getOwnPropertyDescriptor(i,n);return o.get?o.get.call(arguments.length<3?e:t):o.value}},g.apply(this,arguments)}function v(e,n){return n||(n=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(n)}}))}function k(e){return function(e){if(Array.isArray(e))return S(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,n){if(!e)return;if("string"==typeof e)return S(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(e);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return S(e,n)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function S(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,i=new Array(n);t<n;t++)i[t]=e[t];return i}function x(e){var n=function(e,n){if("object"!=typeof e||null===e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var i=t.call(e,n||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===n?String:Number)(e)}(e,"string");return"symbol"==typeof n?n:String(n)}var O,j,E,R,q,P,C,D=function(e){h(i,e);var t=b(i);function i(){var e;return d(this,i),(e=t.call(this)).title=null,e.path=null,e.icon=null,e.key=null,e.eventName=null,e.value={},e.tags=[],e.shadowRootOptions=s(s({},n.LitElement.shadowRootOptions),{},{delegatesFocus:!0}),e}return p(i,[{key:"selected",value:function(e){this.dispatchEvent(new CustomEvent(this.eventName,{composed:!0,bubbles:!0,detail:this.value})),this.dispatchEvent(new CustomEvent("super-daemon-close",{composed:!0,bubbles:!0,detail:!0}))}},{key:"pickColor",value:function(e){return 0===e?"blue":"orange"}},{key:"render",value:function(){var e=this;return n.html(O||(O=v(['\n      <button @click="','">\n        <simple-icon-lite icon="','"></simple-icon-lite>\n        <div class="label-wrap">\n          <div class="action">','</div>\n          <div class="path">','</div>\n        </div>\n        <div class="tags">\n          ','\n        </div>\n        <div class="key-combo">\n        ',"\n        </div>\n      </button>\n    "])),this.selected,this.icon,this.title,this.path,this.tags.map((function(t,i){return n.html(j||(j=v(['\n            <simple-tag accent-color="','" value="','"></simple-tag>'])),e.pickColor(i),t)})),this.key?n.html(E||(E=v(['<kbd class="keyboard-shortcut">',"</kbd>"])),this.key):"")}}],[{key:"tag",get:function(){return"super-daemon-row"}},{key:"properties",get:function(){return{title:{type:String},path:{type:String},icon:{type:String},key:{type:String},eventName:{type:String,attribute:"event-name"},value:{type:Object},tags:{type:Array}}}},{key:"styles",get:function(){var e=[];return g(f(i),"styles",this)&&(e=g(f(i),"styles",this)),[].concat(k(e),[n.css(R||(R=v(["\n        :host {\n          display: block;\n          margin: 8px 16px;\n        }\n        button:focus,\n        button:hover {\n          background-color: var(--super-daemon-row-hover, rgba(0,100,200,.1));\n          outline: 2px solid black;\n        }\n        button {\n          display: flex;\n          padding: 16px;\n          width: 100%;\n          border-radius: 8px;\n          border: none;\n          align-items: middle;\n          justify-content: space-between;\n          background-color: transparent;\n        }\n        :host simple-icon-lite {\n          display: inline-flex;\n          --simple-icon-height: 50px;\n          --simple-icon-width: 50px;\n        }\n        .label-wrap {\n          min-width: 50%;\n          overflow: hidden;\n          text-align: left;\n        }\n        .tags {\n          width: 30%;\n          line-height: 32px;\n          height: 64px;\n          overflow: hidden;\n        }\n        .label-wrap .action {\n          font-size: 32px;\n          font-weight: bold;\n        }\n        .label-wrap .path {\n          font-size: 20px;\n          font-style: italic;\n          margin-top: 8px;\n        }\n        .key-combo {\n          font-size: 42px;\n          font-weight: bold;\n          font-style: italic;\n        }\n        .keyboard-shortcut {\n          background-color: rgba(0, 0, 0, 0.1);\n          border-radius: 4px;\n          color: rgba(0, 0, 0, 0.7);\n          box-shadow: rgb(209 213 219) 0px -4px 0px inset, rgb(0 0 0 / 40%) 0px 1px 1px;\n          padding: 6px 8px;\n          margin: 0px auto;\n          display: block;\n          font-size: 14px;\n          word-spacing: 1px;\n          letter-spacing: -2px;\n          font-family: 'Press Start 2P', 'Trebuchet MS', 'Lucida Sans Unicode', 'Lucida Grande', 'Lucida Sans', Arial, sans-serif;\n        }\n    "])))])}}]),i}(n.LitElement);customElements.define(D.tag,D);var z,A,L=function(e){h(i,e);var t=b(i);function i(){var e;return d(this,i),(e=t.call(this)).items=[],e.shadowRootOptions=s(s({},n.LitElement.shadowRootOptions),{},{delegatesFocus:!0}),e.where="index",e.icon="hardware:keyboard-return",e}return p(i,[{key:"inputfilterChanged",value:function(e){this.like=e.target.value}},{key:"render",value:function(){return n.html(q||(q=v(['\n      <div class="search">\n        <simple-fields-field\n          id="inputfilter"\n          @value-changed="','"\n          .value="','"\n          aria-controls="filter"\n          label="Filter commands"\n          placeholder="What are you looking to do?"\n          type="text"\n          auto-validate=""\n          autofocus\n          part="filter"\n        ></simple-fields-field>\n        <simple-icon-lite icon="','"></simple-icon-lite>\n      </div>\n      <div class="results">\n        ',"\n      </div>\n    "])),this.inputfilterChanged,this.like,this.icon,this.filtered.map((function(e,t){return n.html(P||(P=v(['\n          <super-daemon-row\n            data-row-index="','"\n            .value="','"\n            icon="','"\n            title="','"\n            .tags="','"\n            event-name="','"\n            path="','"\n            key="','"></super-daemon-row>\n        '])),t,e.value,e.icon,e.title,e.tags,e.eventName,e.path,e.key)})))}}],[{key:"tag",get:function(){return"super-daemon-ui"}},{key:"properties",get:function(){return s(s({},g(f(i),"properties",this)),{},{icon:{type:String}})}},{key:"styles",get:function(){var e=[];return g(f(i),"styles",this)&&(e=g(f(i),"styles",this)),[].concat(k(e),[n.css(C||(C=v(["\n        :host {\n          display: block;\n        }\n        .search {\n          display: flex;\n        }\n        .search input {\n          display: inline-flex;\n          width: 100%;\n        }\n        .search simple-icon-lite {\n          display: inline-flex;\n          --simple-icon-height: 50px;\n          --simple-icon-width: 100px;\n          border-radius: 0px;\n        }\n        .results {\n          width: 100%;\n          display: block;\n          border: 2px solid black;\n          max-height: 40vh;\n          min-height: 20vh;\n          overflow-y: scroll;\n        }\n        simple-fields-field, simple-fields-field:focus, simple-fields-field:hover {\n          border: 1px solid transparent;\n          box-shadow: none;\n          outline: 0px;\n        }\n        simple-fields-field {\n          line-height: 40px;\n          padding: 8px;\n          color: inherit;\n          line-height: normal;\n          font-family: inherit;\n          width: 100%;\n          margin: 0px;\n        }\n        simple-fields-field::part(option-input) {\n          padding: 0px 2px;\n          font-size: 24px;\n        }\n        simple-fields-field::part(label) {\n          opacity: 0;\n          height:0;\n          width:0;\n          position:absolute;\n          pointer-events: none;\n        }\n    "])))])}}]),i}(l.SimpleFilterMixin(n.LitElement));customElements.define(L.tag,L);var M=function(e){h(i,e);var t=b(i);function i(){var e;d(this,i),(e=t.call(this)).icon="hardware:keyboard-return",e.opened=!1,e.items=[];var n=void 0!==window.safari;return e.key1=n?"Ctrl":"Alt",e.key2="Shift",e}return p(i,[{key:"connectedCallback",value:function(){g(f(i.prototype),"connectedCallback",this).call(this),window.addEventListener("keydown",this.keyHandler.bind(this)),window.addEventListener("super-daemon-define-option",this.defineOptionEvent.bind(this))}},{key:"disconnectedCallback",value:function(){g(f(i.prototype),"connectedCallback",this).call(this),window.removeEventListener("keydown",this.keyHandler.bind(this)),window.removeEventListener("super-daemon-define-option",this.defineOptionEvent.bind(this))}},{key:"defineOptionEvent",value:function(e){this.defineOption(e.detail)}},{key:"defineOption",value:function(e){e&&e.value&&e.title&&e.eventName&&(e.index=e.tags.join(" ")+" "+e.title+" "+e.key+" "+e.path,this.items.push(e))}},{key:"keyHandler",value:function(e){if(console.log(e.key),this.allowedCallback()&&("Shift"==this.key2&&e.shiftKey&&("Ctrl"==this.key1&&e.ctrlKey||"Alt"==this.key1&&e.altKey)&&(this.opened=!this.opened),"Escape"==e.key&&this.opened&&(this.opened=!1),this.opened&&this.shadowRoot.querySelector("super-daemon-ui").filtered.length>0))switch(e.key){case"Enter":this.shadowRoot.querySelector("super-daemon-ui").shadowRoot.querySelector("super-daemon-row").selected();break;case"ArrowUp":case"ArrowDown":this.shadowRoot.querySelector("super-daemon-ui").shadowRoot.querySelector("super-daemon-row").shadowRoot.querySelector("button").focus()}}},{key:"close",value:function(){this.opened=!1,window.ShadyCSS&&!window.ShadyCSS.nativeShadow&&(this.shadowRoot.querySelector("web-dialog").shadowRoot.querySelector("#backdrop").style.position="relative")}},{key:"open",value:function(){this.items=k(this.items),this.opened=!0;var e=this.shadowRoot.querySelector("web-dialog");this.modal?(e.$backdrop.removeEventListener("click",e.onBackdropClick),e.removeEventListener("keydown",e.onKeyDown,{capture:!0})):(e.$backdrop.addEventListener("click",e.onBackdropClick),e.addEventListener("keydown",e.onKeyDown,{capture:!0,passive:!0})),window.ShadyCSS&&!window.ShadyCSS.nativeShadow&&(this.shadowRoot.querySelector("web-dialog").shadowRoot.querySelector("#backdrop").style.position="fixed",this.shadowRoot.querySelector("web-dialog").shadowRoot.querySelector("#backdrop").style.top=0,this.shadowRoot.querySelector("web-dialog").shadowRoot.querySelector("#backdrop").style.bottom=0,this.shadowRoot.querySelector("web-dialog").shadowRoot.querySelector("#backdrop").style.left=0,this.shadowRoot.querySelector("web-dialog").shadowRoot.querySelector("#backdrop").style.right=0),this.shadowRoot.querySelector("super-daemon-ui").shadowRoot.querySelector("simple-fields-field").focus()}},{key:"render",value:function(){return n.html(z||(z=v(['\n    <web-dialog\n      id="dialog"\n      center\n      role="dialog"\n      part="dialog"\n      aria-label="Super Daemon"\n      aria-modal="true"\n      ?open="','"\n      @open="','"\n      @close="','"\n    >\n      <super-daemon-ui icon="','" .items="','" @super-daemon-close="','"></super-daemon-ui>\n      </web-dialog>\n    '])),this.opened,this.open,this.close,this.icon,this.items,this.close)}},{key:"allowedCallback",value:function(){return!0}}],[{key:"properties",get:function(){return{opened:{type:Boolean,reflect:!0},key1:{type:String},key2:{type:String},icon:{type:String},items:{type:Array}}}},{key:"styles",get:function(){var e=[];return g(f(i),"styles",this)&&(e=g(f(i),"styles",this)),[].concat(k(e),[n.css(A||(A=v(['\n        :host {\n          display: none;\n        }\n        :host([opened]) {\n          display: block;\n        }\n        web-dialog {\n          --dialog-border-radius: var(--simple-modal-border-radius, 2px);\n          z-index: var(--simple-modal-z-index, 1) !important;\n          padding: 0;\n        }\n        web-dialog::part(dialog) {\n          border: 1px solid var(--simple-modal-border-color, #222);\n          min-height: var(--simple-modal-min-height, unset);\n          min-width: var(--simple-modal-min-width, unset);\n          z-index: var(--simple-modal-z-index, 1000);\n          resize: var(--simple-modal-resize, unset);\n          padding: 0;\n          --dialog-height: var(--simple-modal-height, auto);\n          --dialog-width: var(--simple-modal-width, 75vw);\n          --dialog-max-width: var(--simple-modal-max-width, 100vw);\n          --dialog-max-height: var(--simple-modal-max-height, 100vh);\n        }\n        web-dialog.style-scope.simple-modal {\n          display: none !important;\n        }\n        web-dialog[open].style-scope.simple-modal {\n          display: flex !important;\n          position: fixed !important;\n          margin: auto;\n        }\n        :host([resize="none"]) web-dialog[open].style-scope.simple-modal,\n        :host([resize="horizontal"]) web-dialog[open].style-scope.simple-modal {\n          top: calc(50% - var(--simple-modal-height, auto) / 2);\n        }\n        :host([resize="none"]) web-dialog[open].style-scope.simple-modal,\n        :host([resize="vertical"]) web-dialog[open].style-scope.simple-modal {\n          left: calc(50% - var(--simple-modal-width, 75vw) / 2);\n        }\n    '])))])}},{key:"tag",get:function(){return"super-daemon"}}]),i}(n.LitElement);customElements.define(M.tag,M),window.SuperDaemonManager=window.SuperDaemonManager||{},window.SuperDaemonManager.requestAvailability=function(){return window.SuperDaemonManager.instance||(window.SuperDaemonManager.instance=document.createElement("super-daemon"),document.body.appendChild(window.SuperDaemonManager.instance)),window.SuperDaemonManager.instance};var _=window.SuperDaemonManager.requestAvailability();e.SuperDaemon=M,e.SuperDaemonInstance=_,Object.defineProperty(e,"__esModule",{value:!0})}));
