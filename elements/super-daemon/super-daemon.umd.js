!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@lrnwebcomponents/hal-9000/hal-9000.js"),require("lit"),require("@lrnwebcomponents/simple-icon/lib/simple-icon-button.js"),require("web-dialog/index.js"),require("@lrnwebcomponents/absolute-position-behavior/absolute-position-behavior.js"),require("@lrnwebcomponents/simple-icon/lib/simple-icons.js"),require("@lrnwebcomponents/simple-icon/lib/simple-icon-button-lite.js"),require("@lrnwebcomponents/hax-iconset/lib/simple-hax-iconset.js"),require("@lrnwebcomponents/simple-icon/simple-icon.js"),require("@lrnwebcomponents/simple-icon/lib/simple-icon-lite.js"),require("@lrnwebcomponents/simple-fields/lib/simple-fields-field.js"),require("@lrnwebcomponents/simple-fields/lib/simple-tag.js"),require("@lrnwebcomponents/simple-filter/simple-filter.js"),require("@lrnwebcomponents/i18n-manager/lib/I18NMixin.js"),require("@lrnwebcomponents/simple-colors/simple-colors.js")):"function"==typeof define&&define.amd?define(["exports","@lrnwebcomponents/hal-9000/hal-9000.js","lit","@lrnwebcomponents/simple-icon/lib/simple-icon-button.js","web-dialog/index.js","@lrnwebcomponents/absolute-position-behavior/absolute-position-behavior.js","@lrnwebcomponents/simple-icon/lib/simple-icons.js","@lrnwebcomponents/simple-icon/lib/simple-icon-button-lite.js","@lrnwebcomponents/hax-iconset/lib/simple-hax-iconset.js","@lrnwebcomponents/simple-icon/simple-icon.js","@lrnwebcomponents/simple-icon/lib/simple-icon-lite.js","@lrnwebcomponents/simple-fields/lib/simple-fields-field.js","@lrnwebcomponents/simple-fields/lib/simple-tag.js","@lrnwebcomponents/simple-filter/simple-filter.js","@lrnwebcomponents/i18n-manager/lib/I18NMixin.js","@lrnwebcomponents/simple-colors/simple-colors.js"],t):t((e="undefined"!=typeof globalThis?globalThis:e||self).SuperDaemon={},e.$$0,e.lit,null,null,null,null,null,null,null,null,null,null,e.simpleFilter_js,e.I18NMixin_js,e.simpleColors_js)}(this,(function(e,t,n,o,i,r,a,s,l,c,u,p,d,h,m,f){"use strict";function g(e){if(e&&e.__esModule)return e;var t=Object.create(null);return e&&Object.keys(e).forEach((function(n){if("default"!==n){var o=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(t,n,o.get?o:{enumerable:!0,get:function(){return e[n]}})}})),t.default=e,Object.freeze(t)}var v,y,w,b,x,k,S,C,R,j=g(t);function q(e){var t,n,o,i=2;for("undefined"!=typeof Symbol&&(n=Symbol.asyncIterator,o=Symbol.iterator);i--;){if(n&&null!=(t=e[n]))return t.call(e);if(o&&null!=(t=e[o]))return new E(t.call(e));n="@@asyncIterator",o="@@iterator"}throw new TypeError("Object is not async iterable")}function E(e){function t(e){if(Object(e)!==e)return Promise.reject(new TypeError(e+" is not an object."));var t=e.done;return Promise.resolve(e.value).then((function(e){return{value:e,done:t}}))}return E=function(e){this.s=e,this.n=e.next},E.prototype={s:null,n:null,next:function(){return t(this.n.apply(this.s,arguments))},return:function(e){var n=this.s.return;return void 0===n?Promise.resolve({value:e,done:!0}):t(n.apply(this.s,arguments))},throw:function(e){var n=this.s.return;return void 0===n?Promise.reject(e):t(n.apply(this.s,arguments))}},new E(e)}function O(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function T(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?O(Object(n),!0).forEach((function(t){N(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):O(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function L(){L=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,o=Object.defineProperty||function(e,t,n){e[t]=n.value},i="function"==typeof Symbol?Symbol:{},r=i.iterator||"@@iterator",a=i.asyncIterator||"@@asyncIterator",s=i.toStringTag||"@@toStringTag";function l(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(e){l=function(e,t,n){return e[t]=n}}function c(e,t,n,i){var r=t&&t.prototype instanceof d?t:d,a=Object.create(r.prototype),s=new R(i||[]);return o(a,"_invoke",{value:x(e,n,s)}),a}function u(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}e.wrap=c;var p={};function d(){}function h(){}function m(){}var f={};l(f,r,(function(){return this}));var g=Object.getPrototypeOf,v=g&&g(g(j([])));v&&v!==t&&n.call(v,r)&&(f=v);var y=m.prototype=d.prototype=Object.create(f);function w(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function b(e,t){function i(o,r,a,s){var l=u(e[o],e,r);if("throw"!==l.type){var c=l.arg,p=c.value;return p&&"object"==typeof p&&n.call(p,"__await")?t.resolve(p.__await).then((function(e){i("next",e,a,s)}),(function(e){i("throw",e,a,s)})):t.resolve(p).then((function(e){c.value=e,a(c)}),(function(e){return i("throw",e,a,s)}))}s(l.arg)}var r;o(this,"_invoke",{value:function(e,n){function o(){return new t((function(t,o){i(e,n,t,o)}))}return r=r?r.then(o,o):o()}})}function x(e,t,n){var o="suspendedStart";return function(i,r){if("executing"===o)throw new Error("Generator is already running");if("completed"===o){if("throw"===i)throw r;return q()}for(n.method=i,n.arg=r;;){var a=n.delegate;if(a){var s=k(a,n);if(s){if(s===p)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===o)throw o="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o="executing";var l=u(e,t,n);if("normal"===l.type){if(o=n.done?"completed":"suspendedYield",l.arg===p)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(o="completed",n.method="throw",n.arg=l.arg)}}}function k(e,t){var n=t.method,o=e.iterator[n];if(void 0===o)return t.delegate=null,"throw"===n&&e.iterator.return&&(t.method="return",t.arg=void 0,k(e,t),"throw"===t.method)||"return"!==n&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+n+"' method")),p;var i=u(o,e.iterator,t.arg);if("throw"===i.type)return t.method="throw",t.arg=i.arg,t.delegate=null,p;var r=i.arg;return r?r.done?(t[e.resultName]=r.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,p):r:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,p)}function S(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function C(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function R(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(S,this),this.reset(!0)}function j(e){if(e){var t=e[r];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function t(){for(;++o<e.length;)if(n.call(e,o))return t.value=e[o],t.done=!1,t;return t.value=void 0,t.done=!0,t};return i.next=i}}return{next:q}}function q(){return{value:void 0,done:!0}}return h.prototype=m,o(y,"constructor",{value:m,configurable:!0}),o(m,"constructor",{value:h,configurable:!0}),h.displayName=l(m,s,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===h||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,m):(e.__proto__=m,l(e,s,"GeneratorFunction")),e.prototype=Object.create(y),e},e.awrap=function(e){return{__await:e}},w(b.prototype),l(b.prototype,a,(function(){return this})),e.AsyncIterator=b,e.async=function(t,n,o,i,r){void 0===r&&(r=Promise);var a=new b(c(t,n,o,i),r);return e.isGeneratorFunction(n)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},w(y),l(y,s,"Generator"),l(y,r,(function(){return this})),l(y,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),n=[];for(var o in t)n.push(o);return n.reverse(),function e(){for(;n.length;){var o=n.pop();if(o in t)return e.value=o,e.done=!1,e}return e.done=!0,e}},e.values=j,R.prototype={constructor:R,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(C),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function o(n,o){return a.type="throw",a.arg=e,t.next=n,o&&(t.method="next",t.arg=void 0),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var r=this.tryEntries[i],a=r.completion;if("root"===r.tryLoc)return o("end");if(r.tryLoc<=this.prev){var s=n.call(r,"catchLoc"),l=n.call(r,"finallyLoc");if(s&&l){if(this.prev<r.catchLoc)return o(r.catchLoc,!0);if(this.prev<r.finallyLoc)return o(r.finallyLoc)}else if(s){if(this.prev<r.catchLoc)return o(r.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<r.finallyLoc)return o(r.finallyLoc)}}}},abrupt:function(e,t){for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o];if(i.tryLoc<=this.prev&&n.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var r=i;break}}r&&("break"===e||"continue"===e)&&r.tryLoc<=t&&t<=r.finallyLoc&&(r=null);var a=r?r.completion:{};return a.type=e,a.arg=t,r?(this.method="next",this.next=r.finallyLoc,p):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),p},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),C(n),p}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var o=n.completion;if("throw"===o.type){var i=o.arg;C(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:j(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),p}},e}function _(e){return _="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_(e)}function I(e,t,n,o,i,r,a){try{var s=e[r](a),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(o,i)}function M(e){return function(){var t=this,n=arguments;return new Promise((function(o,i){var r=e.apply(t,n);function a(e){I(r,o,i,a,s,"next",e)}function s(e){I(r,o,i,a,s,"throw",e)}a(void 0)}))}}function P(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function A(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,$(o.key),o)}}function D(e,t,n){return t&&A(e.prototype,t),n&&A(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function N(e,t,n){return(t=$(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function F(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&V(e,t)}function z(e){return z=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},z(e)}function V(e,t){return V=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},V(e,t)}function B(e,t){if(t&&("object"==typeof t||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function H(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=z(e);if(t){var i=z(this).constructor;n=Reflect.construct(o,arguments,i)}else n=o.apply(this,arguments);return B(this,n)}}function K(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=z(e)););return e}function U(){return U="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var o=K(e,t);if(o){var i=Object.getOwnPropertyDescriptor(o,t);return i.get?i.get.call(arguments.length<3?e:n):i.value}},U.apply(this,arguments)}function G(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}function Y(e){return function(e){if(Array.isArray(e))return W(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return W(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return W(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function W(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}function $(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var o=n.call(e,t||"default");if("object"!=typeof o)return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}var X,J,Q,Z,ee,te,ne,oe,ie,re,ae,se=function(e){F(o,e);var t=H(o);function o(){var e;return P(this,o),(e=t.call(this)).title=null,e.path=null,e.icon=null,e.image=null,e.textCharacter=null,e.eventName=null,e.more=!1,e.showDetails=!1,e.value={},e.tags=[],e.shadowRootOptions=T(T({},f.SimpleColors.shadowRootOptions),{},{delegatesFocus:!0}),e.active=!1,e}return D(o,[{key:"keyEvent",value:function(e){"Enter"!==e.code&&"Space"!==e.code||(this.selected(),e.preventDefault(),e.stopPropagation(),e.stopImmediatePropagation())}},{key:"clickEvent",value:function(e){this.selected()}},{key:"selected",value:function(){this.dispatchEvent(new CustomEvent("super-daemon-row-selected",{composed:!0,bubbles:!0,cancelable:!0,detail:this})),this.dispatchEvent(new CustomEvent(this.eventName,{composed:!0,bubbles:!0,cancelable:!0,detail:this.value})),"super-daemon-run-program"!==this.eventName&&this.dispatchEvent(new CustomEvent("super-daemon-close",{composed:!0,bubbles:!0,cancelable:!0,detail:this}))}},{key:"_focusIn",value:function(e){this.active=!0}},{key:"_focusOut",value:function(e){this.active=!1}},{key:"pickColor",value:function(e){return 0===e?"blue":"orange"}},{key:"render",value:function(){var e=this;return n.html(v||(v=G(['\n      <button\n        part="button"\n        @click="','"\n        @keydown="','"\n        @mouseover="','"\n        @mouseout="','"\n        @focusin="','"\n        @focusout="','"\n      >\n        ',"\n        ","\n        ",'\n        <div class="label-wrap">\n          <div class="action" part="action">','</div>\n          <div class="path" part="path">','</div>\n        </div>\n        <div class="tags" part="tags">\n          ',"\n        </div>\n        ","\n      </button>\n      ","\n    "])),this.clickEvent,this.keyEvent,this._focusIn,this._focusOut,this._focusIn,this._focusOut,this.icon?n.html(y||(y=G(['<simple-icon-lite\n              icon="','"\n              class="result-icon"\n            ></simple-icon-lite>'])),this.icon):"",this.image?n.html(w||(w=G(['<img src="','" class="result-image" alt="" />'])),this.image):"",this.textCharacter?n.html(b||(b=G(['<span class="result-textCharacter"\n              >',"</span\n            >"])),this.textCharacter):"",this.title,this.path,this.tags.map((function(t,o){return n.html(x||(x=G([' <simple-tag\n              accent-color="','"\n              value="','"\n              part="tag tag-','"\n            ></simple-tag>'])),e.pickColor(o),t,o)})),this.more?n.html(k||(k=G(['<simple-icon-button\n              class="more"\n              ?dark="','"\n              accent-color="','"\n              label="More details"\n              icon="more-vert"\n              aria-controls="details"\n              @click="','"\n              @keydown="','"\n            ></simple-icon-button>'])),this.dark,this.accentColor,this.toggleDetailsClick,this.toggleDetailsKey):n.html(S||(S=G(['<div class="more"></div>']))),this.more?n.html(C||(C=G(['<details\n            id="details"\n            ?open="','"\n            @toggle="','"\n          >\n            <summary>Details</summary>\n            <div>\n              <slot></slot>\n            </div>\n          </details>'])),this.showDetails,this.openChanged):"")}},{key:"toggleDetailsKey",value:function(e){"Enter"!==e.key&&"Space"!==e.key||(this.showDetails=!this.showDetails,e.preventDefault(),e.stopPropagation(),e.stopImmediatePropagation())}},{key:"toggleDetailsClick",value:function(e){this.showDetails=!this.showDetails,e.preventDefault(),e.stopPropagation(),e.stopImmediatePropagation()}},{key:"openChanged",value:function(e){this.showDetails=e.target.open}}],[{key:"tag",get:function(){return"super-daemon-row"}},{key:"properties",get:function(){return T(T({},U(z(o),"properties",this)),{},{title:{type:String},path:{type:String},icon:{type:String},mini:{type:Boolean,reflect:!0},image:{type:String},textCharacter:{type:String,attribute:"text-character"},more:{type:Boolean},showDetails:{type:Boolean},eventName:{type:String,attribute:"event-name"},value:{type:Object},tags:{type:Array},active:{type:Boolean,reflect:!0}})}},{key:"styles",get:function(){var e=[];return U(z(o),"styles",this)&&(e=U(z(o),"styles",this)),[].concat(Y(e),[n.css(R||(R=G(["\n        :host {\n          display: block;\n          margin: 8px 16px;\n          color: var(--simple-colors-default-theme-accent-12, black);\n          background-color: var(--simple-colors-default-theme-accent-1, white);\n        }\n        :host([active]) {\n          cursor: pointer;\n          border-radius: 8px;\n          background-color: var(\n            --super-daemon-row-hover,\n            rgba(0, 100, 200, 0.1)\n          );\n          outline: 2px solid black;\n        }\n        :host([mini]) {\n          margin: 0;\n          --super-daemon-row-label: 18px;\n          --super-daemon-row-path: 10px;\n        }\n        button {\n          display: flex;\n          padding: 16px;\n          width: 100%;\n          border-radius: 0;\n          color: var(--simple-colors-default-theme-accent-12, black);\n          background-color: var(--simple-colors-default-theme-accent-1, white);\n          border: none;\n          align-items: middle;\n          justify-content: space-between;\n          background-color: transparent;\n        }\n        :host([mini]) button {\n          padding: 4px;\n          justify-content: flex-start;\n        }\n        .result-icon {\n          display: inline-flex;\n          --simple-icon-height: var(--super-daemon-row-icon, 50px);\n          --simple-icon-width: var(--super-daemon-row-icon, 50px);\n        }\n        :host([mini]) .result-icon {\n          --simple-icon-height: var(--super-daemon-row-icon, 20px);\n          --simple-icon-width: var(--super-daemon-row-icon, 20px);\n        }\n        .result-image {\n          display: inline-flex;\n          max-height: 64px;\n          max-width: 100px;\n        }\n        .result-textCharacter {\n          display: inline-flex;\n          max-height: 64px;\n          max-width: 100px;\n          font-size: 42px;\n        }\n        :host([mini]) .result-image {\n          max-height: 32px;\n          max-width: 50px;\n        }\n        .label-wrap {\n          min-width: 50%;\n          overflow: hidden;\n          text-align: left;\n        }\n        :host([mini]) .label-wrap {\n          width: 100%;\n          margin-left: 16px;\n        }\n        .tags {\n          width: 30%;\n          line-height: 32px;\n          height: 64px;\n          text-align: left;\n          overflow: hidden;\n        }\n        :host([mini]) .tags {\n          display: none;\n        }\n        .label-wrap .action {\n          font-size: var(--super-daemon-row-label, 32px);\n          font-weight: bold;\n          max-width: 90%;\n          word-break: break-all;\n          overflow: hidden;\n          line-height: var(--super-daemon-row-label, 32px);\n          height: var(--super-daemon-row-label, 32px);\n        }\n        :host([mini]) .label-wrap .action {\n          max-width: unset;\n        }\n        .label-wrap .path {\n          font-size: var(--super-daemon-row-path, 20px);\n          font-style: italic;\n          margin-top: 8px;\n          overflow-wrap: break-word;\n          word-break: break-all;\n          overflow: hidden;\n          max-width: 80%;\n          line-height: var(--super-daemon-row-path, 20px);\n          height: var(--super-daemon-row-path, 20px);\n        }\n        :host([mini]) .label-wrap .path {\n          max-width: unset;\n        }\n        .more {\n          --simple-icon-width: 40px;\n          --simple-icon-height: 40px;\n          width: 40px;\n          height: 40px;\n          display: block;\n        }\n        summary {\n          display: none;\n        }\n        @keyframes details-show {\n          from {\n            opacity: 0;\n            transform: var(--details-translate, translateY(-0.5em));\n          }\n          to {\n            opacity: 1;\n            transform: var(--details-translate, translateY(0));\n          }\n        }\n\n        details[open] {\n          padding: 0 16px 16px 16px;\n          animation: details-show 100ms ease-in-out;\n        }\n      "])))])}}]),o}(f.SimpleColors);customElements.define(se.tag,se);var le,ce,ue,pe,de,he=function(e){F(o,e);var t=H(o);function o(){var e;return P(this,o),(e=t.call(this)).voiceSearch=!1,e.iconAccent="purple",e.multiMatch=!0,e._defaultTextEmpty="No results for this term",e.t=e.t||{},e.t=T(T({},e.t),{},{noResultsForThisTerm:e._defaultTextEmpty,whatAreYouLookingFor:"Type what you are looking to do here..",voiceSearch:"Voice search",filterCommands:"Filter commands",commands:"Commands",loadingResults:"Loading results",commonTasksText:"Merlin helps show you what's possible. Here are some common answers.."}),e.opened=!1,e.items=[],e.mini=!1,e.loading=!1,e.listeningForInput=!1,e.programSearch="",e.commandContext="*",e.programName=null,e.shadowRootOptions=T(T({},f.SimpleColors.shadowRootOptions),{},{delegatesFocus:!0}),e.where="index",e.icon="hardware:keyboard-return",e.questionTags=[],e}return D(o,[{key:"updated",value:function(e){var t=this;U(z(o.prototype),"updated",this)&&U(z(o.prototype),"updated",this).call(this,e),e.forEach((function(e,n){if("filtered"==n&&void 0!==e){var o=window.SuperDaemonManager.requestAvailability();(o.santaMode||t.listeningForInput)&&(clearTimeout(t._selectTimeout),t._selectTimeout=setTimeout((function(){(1===t.filtered.length||t.filtered&&t.filtered[0]&&t.filtered[0].title.toLocaleLowerCase()==o.value.toLocaleLowerCase())&&(t.shadowRoot.querySelector("super-daemon-row").selected(),o.listeningForInput=!0)}),600))}"opened"==n&&t.opened&&(t.shadowRoot.querySelector("#inputfilter").focus(),t.shadowRoot.querySelector(".results").scrollTo(0,0)),"commandContext"==n&&t.dispatchEvent(new CustomEvent("super-daemon-command-context-changed",{detail:{value:t[n]}})),"like"==n&&t.dispatchEvent(new CustomEvent("like-changed",{detail:{value:t[n]}}))}))}},{key:"setupProgram",value:function(){this.programSearch="",this.shadowRoot.querySelector("#inputfilter").focus(),this.shadowRoot.querySelector("#inputfilter").select(),this.shadowRoot.querySelector(".results").scrollTo(0,0)}},{key:"inputfilterChanged",value:function(e){this.programName?this.programSearch=e.target.value:this.like=e.target.value}},{key:"itemSelected",value:function(e){this.like="",this.programSearch=""}},{key:"_resultsKeydown",value:function(e){if(this.filtered.length>0&&this.shadowRoot.querySelector("super-daemon-row[active]"))switch(e.key){case"ArrowUp":case"ArrowLeft":this.shadowRoot.querySelector("super-daemon-row[active]")===this.shadowRoot.querySelector("super-daemon-row")?this.shadowRoot.querySelector("super-daemon-row:last-child").shadowRoot.querySelector("button").focus():this.shadowRoot.querySelector("super-daemon-row[active]").previousElementSibling.shadowRoot.querySelector("button").focus();break;case"ArrowDown":case"ArrowRight":this.shadowRoot.querySelector("super-daemon-row[active]")===this.shadowRoot.querySelector("super-daemon-row:last-child")?this.shadowRoot.querySelector("super-daemon-row").shadowRoot.querySelector("button").focus():this.shadowRoot.querySelector("super-daemon-row[active]").nextElementSibling.shadowRoot.querySelector("button").focus()}}},{key:"_inputKeydown",value:function(e){if(this.filtered.length>0)switch(e.key){case"Enter":this.shadowRoot.querySelector("super-daemon-row").selected();break;case"ArrowUp":this.shadowRoot.querySelector("super-daemon-row:last-child").shadowRoot.querySelector("button").focus(),this.shadowRoot.querySelector("super-daemon-row:last-child").scrollIntoView({block:"end",inline:"nearest"});break;case"ArrowDown":this.shadowRoot.querySelector("super-daemon-row").shadowRoot.querySelector("button").focus(),this.shadowRoot.querySelector("super-daemon-row").scrollIntoView({block:"start",inline:"nearest"})}switch(e.key){case"!":case"/":case"\\":case">":case"<":case"?":"\\"===e.key&&""==this.like||"!"===e.key&&""==this.like?(this.commandContext="/",e.preventDefault()):"<"===e.key&&""==this.like?(this.commandContext=">",e.preventDefault()):""==this.like&&(this.commandContext=e.key,e.preventDefault());break;case"Backspace":""==this.programSearch&&this.programName?(this.dispatchEvent(new CustomEvent("super-daemon-run-program",{bubbles:!0,cancelable:!0,composed:!0,detail:!1})),e.preventDefault()):!this.programName&&""==this.like&&this.commandContext&&(this.commandContext="*",e.preventDefault())}}},{key:"getActiveTitle",value:function(e){switch(e){case"/":return this.t.slashCommandsActive;case">":return this.t.developerConsoleActive;case"?":return this.t.helpActive}return""}},{key:"getActiveIcon",value:function(e){switch(e){case"/":return"hax:slash";case">":return"hax:console-line";case"?":return"icons:help"}return""}},{key:"commonConcepts",value:function(e){var t=window.SuperDaemonManager.requestAvailability();switch(e){case"media":t.runProgram("/",{},null,null,"","sources");break;case"edit":t.runProgram("*",{},null,null,"","CMS/action/edit");break;case"*":t.runProgram("*",{},null,null,"","");break;case"sites":t.runProgram("*",{},null,null,"","sites")}}},{key:"tagClick",value:function(e){this.commonConcepts(e.target.getAttribute("data-value"))}},{key:"tagKeydown",value:function(e){"Enter"!==e.key&&" "!==e.key||(e.preventDefault(),this.commonConcepts(e.target.getAttribute("data-value")))}},{key:"voiceSearchClick",value:function(){var e=window.SuperDaemonManager.requestAvailability();this.listeningForInput?e.listeningForInput=!1:(e.hal.speak("How may I help you?",e.santaMode).then((function(t){e.playSound(),e.listeningForInput=!0})),this.shadowRoot.querySelector("#inputfilter").focus(),this.shadowRoot.querySelector(".results").scrollTo(0,0))}},{key:"render",value:function(){var e=this;return n.html(X||(X=G(['\n      <div class="common-tasks-text">','</div>\n      <div class="question-tags">\n        ','\n      </div>\n      <div class="search">\n      ',"\n        ","\n        ",'\n        <simple-fields-field\n          id="inputfilter"\n          @value-changed="','"\n          @keydown="','"\n          .value="','"\n          aria-controls="filter"\n          label="','"\n          placeholder="','"\n          type="text"\n          auto-validate=""\n          autofocus\n          part="filter"\n        ></simple-fields-field>\n        <simple-icon icon="','" class="icon" accent-color="','"></simple-icon>\n      </div>\n      <div class="results-stats">\n        '," / "," ",'\n      </div>\n      <div\n        class="results"\n        @keydown="','"\n        @super-daemon-row-selected="','"\n      >\n        ',"\n      </div>\n    "])),this.t.commonTasksText,this.questionTags?this.questionTags.map((function(t,o){return n.html(J||(J=G([' <simple-tag\n            tabindex="0"\n            @keydown="','"\n            @click="','"\n            accent-color="grey"\n            value="','"\n            part="tag tag-','"\n            data-value="','"\n          ></simple-tag>'])),e.tagKeydown,e.tagClick,t.label,o,t.value)})):"",this.voiceSearch?n.html(Q||(Q=G(['<simple-icon-button-lite\n              class="voice ','"\n              @click="','"\n              icon="','"\n              ?dark="','"\n              title="','"></simple-icon-button-lite>'])),this.listeningForInput?"listening":"",this.voiceSearchClick,this.listeningForInput?"hax:loading":"settings-voice",this.dark,this.t.voiceSearch):"","*"!=this.commandContext?n.html(Z||(Z=G(['<simple-icon-lite\n              title="','"\n              icon="','"\n              class="user-context-icon"\n            ></simple-icon-lite>'])),this.getActiveTitle(this.commandContext),this.getActiveIcon(this.commandContext)):"",this.programName?n.html(ee||(ee=G(['<span class="program">',"</span>"])),this.programName):"",this.inputfilterChanged,this._inputKeydown,this.like,this.t.filterCommands,this.t.whatAreYouLookingFor,this.icon,this.listeningForInput?this.iconAccent:"grey",this.filtered.length,this.items.length,this.t.commands,this._resultsKeydown,this.itemSelected,this.loading?n.html(te||(te=G(['<div class="loading">',"..</div>"])),this.t.loadingResults):n.html(ne||(ne=G(["\n              ","\n            "])),this.filtered.length&&0!==this.filtered.length?n.html(ie||(ie=G(["\n                    ","\n                  "])),this.filtered.map((function(t,o){return n.html(re||(re=G(['\n                        <super-daemon-row\n                          data-row-index="','"\n                          .value="','"\n                          icon="','"\n                          image="','"\n                          ?dark="','"\n                          text-character="','"\n                          title="','"\n                          .tags="','"\n                          event-name="','"\n                          path="','"\n                          ?more="','"\n                          ?mini="','"\n                          >',"</super-daemon-row\n                        >\n                      "])),o,t.value,t.icon,t.image,e.dark,t.textCharacter,t.title,t.tags,t.eventName,t.path,t.more&&!e.mini,e.mini,t.more?t.more:n.nothing)}))):n.html(oe||(oe=G(['<div class="no-results">\n                      ','\n                    </div>\n                    <div class="slotted"><slot></slot></div>'])),this.t.noResultsForThisTerm)))}}],[{key:"tag",get:function(){return"super-daemon-ui"}},{key:"properties",get:function(){return T(T({},U(z(o),"properties",this)),{},{icon:{type:String},iconAccent:{type:String,attribute:"icon-accent"},voiceSearch:{type:Boolean,reflect:!0,attribute:"voice-search"},listeningForInput:{type:Boolean,reflect:!0,attribute:"listening-for-input"},mini:{type:Boolean,reflect:!0},loading:{type:Boolean,reflect:!0},programSearch:{type:String,attribute:"program-search"},programName:{type:String,attribute:"program-name"},commandContext:{type:String,attribute:"command-context"},opened:{type:Boolean,reflect:!0},questionTags:{type:Array}})}},{key:"styles",get:function(){var e=[];return U(z(o),"styles",this)&&(e=U(z(o),"styles",this)),[].concat(Y(e),[n.css(ae||(ae=G(['\n        :host {\n          display: block;\n        }\n        .question-tags {\n          display: flex;\n          justify-content: space-evenly;\n          padding: 8px;\n        }\n        .common-tasks-text {\n          font-size: 18px;\n          padding: 8px;\n        }\n        .search {\n          display: flex;\n          margin: 16px;\n        }\n        .search input {\n          display: inline-flex;\n          width: 100%;\n        }\n        .search .icon {\n          display: inline-flex;\n          --simple-icon-height: 50px;\n          --simple-icon-width: 100px;\n        }\n        .voice {\n          --simple-icon-height: 50px;\n          --simple-icon-width: 100px;\n          --simple-icon-button-border-radius: 0;\n          color: var(--simple-colors-default-theme-grey-10, grey);\n          transition: color .6s ease-in-out;\n        }\n        .voice:hover,\n        .voice:focus {\n          color: var(--simple-colors-default-theme-purple-6, purple);\n        }\n        .voice.listening {\n          color: var(--simple-colors-default-theme-purple-4, purple);\n        }\n\n        .search .user-context-icon {\n          display: inline-flex;\n          --simple-icon-height: 50px;\n          --simple-icon-width: 30px;\n        }\n        :host([mini]) .search .user-context-icon {\n          --simple-icon-height: 24px;\n          --simple-icon-width: 24px;\n          margin-top: 0px;\n        }\n        .loading {\n          font-size: 24px;\n          font-family: "Roboto Mono", monospace;\n          font-style: italic;\n          margin: 16px;\n        }\n        .program {\n          display: inline-flex;\n          font-family: "Roboto Mono", monospace;\n          color: var(--simple-colors-default-theme-grey-1, white);\n          background-color: var(--simple-colors-default-theme-grey-12, black);\n          line-break: anywhere;\n          word-break: break-all;\n          word-wrap: break-word;\n          text-overflow: clip;\n          overflow: hidden;\n          line-height: 16px;\n          height: 16px;\n          padding: 2px 4px;\n          margin: 16px 0 0 -2px;\n          font-size: 10px;\n          width: 100%;\n          max-width: 100px;\n        }\n        :host([mini]) .program {\n          line-height: 12px;\n          font-size: 10px;\n          max-width: 50px;\n          height: 24px;\n          margin: 0;\n          padding: 2px;\n        }\n        .results-stats {\n          right: 0;\n          position: absolute;\n          font-size: 12px;\n          color: var(--simple-colors-default-theme-grey-10, black);\n          padding: 8px;\n          margin: 8px;\n        }\n        .results {\n          width: 100%;\n          display: block;\n          border: 2px solid var(--simple-colors-default-theme-grey-10, black);\n          max-height: 50vh;\n          min-height: 30vh;\n          overflow-y: scroll;\n          scroll-snap-align: start;\n          scroll-snap-type: y mandatory;\n          padding: 32px 0px;\n        }\n        .no-results {\n          font-size: 32px;\n          font-weight: bold;\n          max-width: 90%;\n          word-break: break-all;\n          overflow: hidden;\n          line-height: 32px;\n          height: 32px;\n          margin: 16px auto;\n          border: 1px solid transparent;\n          box-shadow: none;\n          outline: 0px;\n        }\n        .slotted {\n          display: block;\n          max-width: 90%;\n          font-size: 20px;\n        }\n        .slotted ::slotted(a) {\n          color: var(--simple-colors-default-theme-grey-8, blue);\n          font-weight: bold;\n          text-decoration: underline;\n          cursor: pointer;\n        }\n        :host([mini]) .no-results {\n          font-size: 14px;\n          margin: 8px auto;\n          line-height: 14px;\n        }\n        simple-fields-field {\n          line-height: 40px;\n          padding: 8px;\n          color: var(--simple-colors-default-theme-grey-12, black);\n          background-color: var(--simple-colors-default-theme-grey-1, white);\n          line-height: normal;\n          font-family: inherit;\n          width: 100%;\n          margin: 0px;\n        }\n        simple-tag:hover,\n        simple-tag:focus {\n          cursor: pointer;\n          outline: 1px solid var(--simple-colors-default-theme-grey-10, black);\n          outline-offset: 4px;\n        }\n        :host([mini]) simple-fields-field::part(option-input) {\n          font-size: 12px;\n        }\n        simple-fields-field::part(option-input) {\n          padding: 0px 2px;\n          font-size: 24px;\n        }\n        simple-fields-field::part(label) {\n          opacity: 0;\n          height: 0;\n          width: 0;\n          position: absolute;\n          pointer-events: none;\n        }\n\n        @media screen and (max-width: 800px) {\n          .results-stats,\n          .common-tasks-text,\n          .question-tags {\n            display: none;\n          }\n          .results {\n            padding: 0px;\n          }\n          simple-fields-field {\n            line-height: 20px;\n          }\n          .search .icon {\n            display: none;\n          }\n          super-daemon-row {\n            --super-daemon-row-icon: 32px;\n            margin: 8px;\n          }\n          super-daemon-row::part(button) {\n            padding: 4px;\n          }\n          super-daemon-row::part(action) {\n            font-size: 28px;\n            line-height: 28px;\n            height: 28px;\n          }\n          super-daemon-row::part(path) {\n            font-size: 16px;\n          }\n          super-daemon-row::part(tags) {\n            width: 20%;\n          }\n          super-daemon-row::part(tag) {\n            display: none;\n          }\n          super-daemon-row::part(tag-0) {\n            display: inline-flex !important;\n            --simple-fields-font-size: 12px;\n          }\n        }\n        @media screen and (max-width: 640px) {\n          super-daemon-row::part(path) {\n            font-size: 12px;\n          }\n          super-daemon-row::part(action) {\n            font-size: 24px;\n            line-height: 24px;\n            height: 24px;\n          }\n        }\n\n        :host([mini]) {\n          color: var(--simple-colors-default-theme-grey-12, black);\n          background-color: var(--simple-colors-default-theme-grey-1, white);\n        }\n        :host([mini]) super-daemon-row {\n          --super-daemon-row-icon: 24px;\n          border-radius: 0px;\n        }\n        :host([mini]) .results-stats,\n        :host([mini]) .common-tasks-text,\n        :host([mini]) .question-tags {\n          display: none;\n        }\n        :host([mini]) .results {\n          padding: 4px 0px;\n          max-height: unset;\n          min-height: unset;\n          height: 200px;\n        }\n        :host([mini]) .search .icon {\n          display: none;\n        }\n      '])))])}}]),o}(h.SimpleFilterMixin(m.I18NMixin(f.SimpleColors)));customElements.define(he.tag,he);var me=function(e){F(i,e);var t,o=H(i);function i(){var e;P(this,i),(e=o.call(this)).activeSelection=null,e.voiceCommands={},e.programTarget=null,e.activeRange=null,e.santaMode=!1,e.activeNode=null,e.voiceSearch=!1,e.listeningForInput=!1,e.voiceRespondsTo="merlin",e.hal=null,e.windowControllers=new AbortController,e.windowControllers2=new AbortController,e.value="",e.icon="hardware:keyboard-return",e.context=[],e.opened=!1,e.questionTags=[],e.items=[],e.loading=!1,e.like="",e.mini=!1,e._programValues={},e.programSearch="",e.allItems=[],e.programResults=[],e.programName=null,e.commandContext="*";var t=void 0!==window.safari;return e.key1=t?"Ctrl":"Alt",e.key2="Shift",e}return D(i,[{key:"firstUpdated",value:function(e){U(z(i.prototype),"firstUpdated",this)&&U(z(i.prototype),"firstUpdated",this).call(this,e),fe.defineOption({title:"Toggle Santa Mode",icon:"settings-voice",tags:["Developer","government","merlin","big-tech","overlord","santa","all-seeing-eye"],eventName:"super-daemon-element-method",path:">settings/voice",voice:"(toggle) santa mode",context:[">"],more:n.html(le||(le=G(["<span>He sees you when your sleeping, he knows when your awake, and with this command active he is always listening for input ready to respond. He's.. Santa Merlin. Ho..Ho....Ho.</span>"]))),value:{target:this,method:"toggleSantaMode",args:[]}})}},{key:"connectedCallback",value:function(){U(z(i.prototype),"connectedCallback",this).call(this),window.addEventListener("keydown",this.keyHandler.bind(this),{signal:this.windowControllers.signal}),window.addEventListener("super-daemon-define-option",this.defineOptionEvent.bind(this),{signal:this.windowControllers.signal}),window.addEventListener("super-daemon-element-method",this.elementMethod.bind(this),{signal:this.windowControllers.signal}),window.addEventListener("super-daemon-element-click",this.elementClick.bind(this),{signal:this.windowControllers.signal}),window.addEventListener("super-daemon-run-program",this.runProgramEvent.bind(this),{signal:this.windowControllers.signal}),window.addEventListener("super-daemon-voice-command",this._addVoiceCommand.bind(this),{signal:this.windowControllers.signal})}},{key:"disconnectedCallback",value:function(){this.windowControllers.abort(),this.windowControllers2.abort(),U(z(i.prototype),"disconnectedCallback",this).call(this)}},{key:"runProgram",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"/",n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"",a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null;this.commandContext=t,this._programToRun=o,this.programSearch=r,null!=a&&(this.like=a),this._programToRun?(this.shadowRoot.querySelector("super-daemon-ui").setupProgram(),setTimeout(M(L().mark((function t(){return L().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,e.loading=!0,t.next=4,e._programToRun(e.programSearch,n);case 4:e.programResults=t.sent,e.loading=!1,t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),e.loading=!1;case 11:case"end":return t.stop()}}),t,null,[[0,8]])}))),50)):this.programResults=[],this.programName=i}},{key:"runProgramEvent",value:function(e){if(e.detail){var t=e.detail;this._programValues=t,this.like="",this.runProgram(t.context,this._programValues,t.program,t.name,"")}else this.runProgram("/"),this._programValues={}}},{key:"elementMethod",value:function(e){if(e.detail){var t,n=e.detail;n.args||(n.args=[]),(t=n.target)[n.method].apply(t,Y(n.args))}}},{key:"elementClick",value:function(e){e.detail&&e.detail.target.dispatchEvent(new MouseEvent("click",{bubbles:!0,cancelable:!0,view:window}))}},{key:"defineOptionEvent",value:function(e){this.defineOption(e.detail)}},{key:"defineOption",value:function(e){if(e&&e.value&&e.title&&e.eventName){e.tags||(e.tags=[]),e.path||(e.path=""),e.priority||(e.priority=0);var t=T({},e);delete t.icon,delete t.image,delete t.textCharacter,delete t.value,delete t.eventName,t=Object.values(t).filter((function(e){if(!["boolean","number"].includes(_(e))&&""!==e&&null!=e)return!0}));var n=[];t.map((function(e){"string"==typeof e?e.split("/").map((function(e){["","*","/"," ","?",">"].includes(e)||n.push(e.toLocaleLowerCase())})):Array.isArray(e)&&e.map((function(e){["","*","/"," ","?",">"].includes(e)||n.push(e.toLocaleLowerCase())}))}));var o=n.join(" ").replace(/\*/g,"").replace(/\?/g,"");n=Y(new Set(o.split(" "))),e.index=n.join(" ")+" "+e.path,this.allItems.push(e)}}},{key:"updateSearchInputViaVoice",value:function(e){var t=this,n=this.shadowRoot.querySelector("super-daemon-ui").shadowRoot.querySelector("simple-fields-field");n.value=e,n.focus(),n.select(),setTimeout((function(){t.setListeningStatus(!1)}),0)}},{key:"addVoiceCommand",value:function(e,t,n){t&&(e=e.replace(":name:",this.voiceRespondsTo).toLocaleLowerCase(),this.voiceCommands[e]=t[n].bind(t))}},{key:"_addVoiceCommand",value:function(e){var t=e.detail.context;t||(t=e.target),this.addVoiceCommand(e.detail.command,t,e.detail.callback)}},{key:"keyHandler",value:function(e){this.allowedCallback()&&("Shift"==this.key2&&e.shiftKey&&("Ctrl"==this.key1&&e.ctrlKey||"Alt"==this.key1&&e.altKey)&&(this.opened=!this.opened,this.opened&&(this.mini=!1)),"Escape"==e.key&&this.opened&&this.miniCancel())}},{key:"setListeningStatus",value:function(e){this.santaMode?this.listeningForInput=!0:this.listeningForInput=e}},{key:"close",value:function(e){if(this.opened=!1,this.activeNode=null,this.loading=!1,this.like="",this.mini=!1,this._programValues={},this.programSearch="",this.voiceCommands={},this.defaultVoiceCommands(),this.programResults=[],this.programName=null,this.commandContext="*",this.setListeningStatus(!1),!this.santaMode&&e&&"super-daemon-close"!==e.type&&"close"!==e.type){var t="simple";(window.AppHax||window.HAXCMS)&&(t="haxcms"),window.dispatchEvent(new CustomEvent("".concat(t,"-toast-hide"),{bubbles:!0,composed:!0,cancelable:!1,detail:!1}))}var n=new MouseEvent("click",{view:window,bubbles:!0,cancelable:!0});document.dispatchEvent(n),this.windowControllers2.abort(),window.ShadyCSS&&!window.ShadyCSS.nativeShadow&&(this.shadowRoot.querySelector("web-dialog").shadowRoot.querySelector("#backdrop").style.position="relative")}},{key:"filterItems",value:function(e,t){var n=this,o=e.filter((function(e){if(e.context){return 0!==("*"==n.commandContext?t.filter((function(t){return e.context.includes(t)})):[n.commandContext].filter((function(t){return e.context.includes(t)}))).length}return!0}));return o.sort((function(e,t){var n=e.title.toUpperCase(),o=t.title.toUpperCase();return n<o?-1:n>o?1:0})),o.forEach((function(e){e.title.toLocaleLowerCase()==n.value.toLocaleLowerCase()&&(e.priority=-1e7)})),o.sort((function(e,t){return e.priority<t.priority?-1:e.priority>t.priority?1:0}))}},{key:"playSound",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"coin2";return new Promise((function(n){var o=["coin2"].includes(t)?t:"coin2";e.audio=new Audio(new URL("./lib/assets/sounds/".concat(o,".mp3"),"undefined"==typeof document&&"undefined"==typeof location?new(require("url").URL)("file:"+__filename).href:"undefined"==typeof document?location.href:document.currentScript&&document.currentScript.src||new URL("super-daemon.umd.js",document.baseURI).href).href),e.audio.volume=.8,e.audio.onended=function(e){n()},e.audio.play(),setTimeout((function(){n()}),1e3)}))}},{key:"appendContext",value:function(e){e&&!this.context.includes(e)&&this.context.push(e)}},{key:"removeContext",value:function(e){e&&this.context.includes(e)&&this.context.splice(this.context.indexOf(e),1)}},{key:"clickOnMiniMode",value:function(e){e.target!==this&&this.miniCancel()}},{key:"miniCancel",value:function(){if(this.activeNode&&this.activeNode.focus&&this.mini&&this.activeRange&&this.activeSelection)try{this.activeNode.textContent=this.value,this.activeNode.focus(),this.activeRange.setStart(this.activeNode,0),this.activeRange.collapse(!0),this.activeSelection.removeAllRanges(),this.activeSelection.addRange(this.activeRange),this.activeSelection.selectAllChildren(this.activeNode),this.activeSelection.collapseToEnd()}catch(e){console.warn(e)}this.close()}},{key:"open",value:function(){var e=this;this.opened=!0,this.items=this.filterItems(this.allItems,this.context);var t=this.shadowRoot.querySelector("web-dialog");t&&(t.$backdrop.addEventListener("click",t.onBackdropClick),t.addEventListener("keydown",t.onKeyDown,{capture:!0,passive:!0}),window.ShadyCSS&&!window.ShadyCSS.nativeShadow&&(this.shadowRoot.querySelector("web-dialog").shadowRoot.querySelector("#backdrop").style.position="fixed",this.shadowRoot.querySelector("web-dialog").shadowRoot.querySelector("#backdrop").style.top=0,this.shadowRoot.querySelector("web-dialog").shadowRoot.querySelector("#backdrop").style.bottom=0,this.shadowRoot.querySelector("web-dialog").shadowRoot.querySelector("#backdrop").style.left=0,this.shadowRoot.querySelector("web-dialog").shadowRoot.querySelector("#backdrop").style.right=0)),this.windowControllers2.abort(),this.reprocessVoiceCommands(),setTimeout((function(){e.windowControllers2=new AbortController,e.mini&&window.addEventListener("click",e.clickOnMiniMode.bind(e),{once:!0,passive:!0,signal:e.windowControllers2.signal}),e.shadowRoot.querySelector("super-daemon-ui").shadowRoot.querySelector("simple-fields-field").focus(),e.shadowRoot.querySelector("super-daemon-ui").shadowRoot.querySelector("simple-fields-field").select()}),0)}},{key:"focusout",value:function(e){var t=this;if(e){for(var n=e.relatedTarget;n!==document.body&&null!==n;){if(n===this.shadowRoot.querySelector("super-daemon-ui"))return;if(!n||!n.parentElement)return;n=n.parentElement}n!==this.shadowRoot.querySelector("super-daemon-ui")&&setTimeout((function(){t.opened&&(t.shadowRoot.querySelector("super-daemon-ui").shadowRoot.querySelector("simple-fields-field").focus(),t.shadowRoot.querySelector("super-daemon-ui").shadowRoot.querySelector("simple-fields-field").select())}),0)}}},{key:"noResultsSlot",value:function(e){}},{key:"render",value:function(){return n.html(ce||(ce=G([""," "])),this.mini?n.html(ue||(ue=G(['\n          <absolute-position-behavior\n            justify\n            position="bottom"\n            allow-overlap\n            sticky\n            auto\n            .target="','"\n            ?hidden="','"\n          >\n            <super-daemon-ui\n              ?open="','"\n              ?mini="','"\n              icon="','"\n              ?dark="','"\n              .questionTags="','"\n              ?loading="','"\n              like="','"\n              ?listening-for-input="','"\n              ?voice-search="','"\n              .items="','"\n              command-context="','"\n              program-name="','"\n              program-search="','"\n              @value-changed="','"\n              @super-daemon-close="','"\n              @super-daemon-command-context-changed="','"\n            ></super-daemon-ui>\n          </absolute-position-behavior>\n        '])),this.activeNode,!this.opened,this.opened,this.mini,this.icon,this.dark,this.questionTags,this.loading,this.like,this.listeningForInput,this.voiceSearch,this.itemsForDisplay(this.items,this.programResults),this.commandContext,this.programName,this.programSearch,this.inputfilterChanged,this.close,this.commandContextChanged):n.html(pe||(pe=G(['\n          <web-dialog\n            id="dialog"\n            center\n            role="dialog"\n            part="dialog"\n            aria-label="Super Daemon"\n            aria-modal="true"\n            ?open="','"\n            @open="','"\n            @close="','"\n            @focusout="','"\n          >\n            <super-daemon-ui\n              ?open="','"\n              icon="','"\n              ?loading="','"\n              like="','"\n              ?dark="','"\n              ?voice-search="','"\n              ?listening-for-input="','"\n              .questionTags="','"\n              @like-changed="','"\n              .items="','"\n              command-context="','"\n              program-name="','"\n              program-search="','"\n              @value-changed="','"\n              @super-daemon-close="','"\n              @super-daemon-command-context-changed="','"\n              >','</super-daemon-ui\n            >\n            <simple-icon-button\n              id="cancel"\n              icon="cancel"\n              ?dark="','"\n              @click="','"\n            ></simple-icon-button>\n          </web-dialog>\n        '])),this.opened,this.open,this.close,this.focusout,this.opened,this.icon,this.loading,this.like,this.dark,this.voiceSearch,this.listeningForInput,this.questionTags,this.likeChanged,this.itemsForDisplay(this.items,this.programResults),this.commandContext,this.programName,this.programSearch,this.inputfilterChanged,this.close,this.commandContextChanged,this.noResultsSlot(this.like||this.programSearch),this.dark,this.close))}},{key:"likeChanged",value:function(e){this.like=e.detail.value}},{key:"randomResponse",value:function(e){return e[Math.floor(Math.random()*e.length)]}},{key:"toggleSantaMode",value:function(e){var t=this;this.santaMode=!this.santaMode,setTimeout((function(){var e="Santa mode activated: Watch what you say";t.santaMode||(e="Santa mode deactivated: Have a nice day believing you are not being watched"),t.hal.speak(e,t.santaMode).then((function(e){t.setListeningStatus(t.santaMode)}))}),0)}},{key:"promptMerlin",value:function(e){var t=this;this.opened||this.open(),this.__closeLock=!0,this.listeningForInput=!1,this.hal.speak(this.randomResponse(["I'm here","Yes?","What?","What can I do for you?","What do you need?","How can I help?"]),this.santaMode).then((function(e){t.playSound().then((function(e){t.listeningForInput=!0,t.__closeLock=!1}))}))}},{key:"stopMerlin",value:function(e){this.santaMode&&this.hal.speak("Please disable Santa mode to stop listening",this.santaMode),this.setListeningStatus(!1)}},{key:"closeMerlin",value:function(e){var t=this;this.santaMode&&this.hal.speak(this.randomResponse(["thanks for stopping by","See ya","See you soon","Till we meet again"]),this.santaMode).then((function(e){t.close()}))}},{key:"belshnickle",value:function(){this.santaMode&&this.toggleSantaMode()}},{key:"defaultVoiceCommands",value:function(){var e=this;this.addVoiceCommand("(hey) ".concat(this.voiceRespondsTo),this,"promptMerlin"),this.addVoiceCommand("stop listening",this,"stopMerlin"),this.addVoiceCommand("close merlin",this,"closeMerlin"),this.addVoiceCommand("disable santa",this,"belshnickle"),this.voiceCommands["(run) program"]=function(t){e.commandContextChanged({detail:{value:"/",label:"program"}})},this.voiceCommands["(I need) help"]=function(t){e.commandContextChanged({detail:{value:"?",label:"help"}})},this.voiceCommands["developer (mode)"]=function(t){e.commandContextChanged({detail:{value:">",label:"developer"}})},this.addVoiceCommand("*anything",this,"updateSearchInputViaVoice")}},{key:"updated",value:function(e){var t=this;U(z(i.prototype),"updated",this)&&U(z(i.prototype),"updated",this).call(this,e),e.has("voiceSearch")&&this.voiceSearch?Promise.resolve(j).then((function(){t.hal=window.Hal9000.requestAvailability(),t.hal.debug=!0,t.hal.toast=!0,t.defaultVoiceCommands()})):e.has("voiceSearch")&&!this.voiceSearch&&(this.hal=null),e.has("listeningForInput")&&this.hal&&(this.hal.enabled=this.listeningForInput,clearTimeout(this._listeningTimeout),this._listeningTimeout=setTimeout((function(){if(!t.listeningForInput&&!t.__closeLock){var e="simple";(window.AppHax||window.HAXCMS)&&(e="haxcms"),window.dispatchEvent(new CustomEvent("".concat(e,"-toast-hide"),{bubbles:!0,composed:!0,cancelable:!1,detail:!1}))}}),100))}},{key:"inputfilterChanged",value:(t=M(L().mark((function e(t){return L().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.value=t.detail.value,!this.programName||!this._programToRun){e.next=9;break}return this.loading=!0,e.next=5,this._programToRun(t.detail.value,this._programValues);case 5:this.programResults=e.sent,this.loading=!1,e.next=11;break;case 9:this.programResults=[],this.items=this.filterItems(this.allItems,this.context);case 11:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})},{key:"itemsForDisplay",value:function(e,t){return null!=this.programName?t:e}},{key:"reprocessVoiceCommands",value:function(){var e=this;this.hal&&this.voiceSearch&&this.items&&(clearTimeout(this._blockRerunTimeout),this._blockRerunTimeout=setTimeout(M(L().mark((function t(){var n,o,i,r,a,s;return L().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.defaultVoiceCommands(),n=!1,o=!1,t.prev=3,r=L().mark((function t(){var n;return L().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:(n=s.value).title&&(e.voiceCommands[n.voice?n.voice.toLocaleLowerCase():n.title.toLocaleLowerCase()]=function(t){e.shadowRoot.querySelector("super-daemon-ui").items=[n],e.value=n.title,e.shadowRoot.querySelector("super-daemon-ui").filtered=[n],setTimeout((function(){e.shadowRoot.querySelector("super-daemon-ui").shadowRoot.querySelector("super-daemon-row").selected()}),0),n.value.program?e.playSound().then((function(t){var n=e.shadowRoot.querySelector("super-daemon-ui").shadowRoot.querySelector("simple-fields-field");n.focus(),n.select()})):e.setListeningStatus(!1)});case 2:case"end":return t.stop()}}),t)})),a=q(e.items);case 6:return t.next=8,a.next();case 8:if(!(n=!(s=t.sent).done)){t.next=13;break}return t.delegateYield(r(),"t0",10);case 10:n=!1,t.next=6;break;case 13:t.next=19;break;case 15:t.prev=15,t.t1=t.catch(3),o=!0,i=t.t1;case 19:if(t.prev=19,t.prev=20,!n||null==a.return){t.next=24;break}return t.next=24,a.return();case 24:if(t.prev=24,!o){t.next=27;break}throw i;case 27:return t.finish(24);case 28:return t.finish(19);case 29:e.hal.commands=T({},e.voiceCommands);case 30:case"end":return t.stop()}}),t,null,[[3,15,19,29],[20,,24,28]])}))),10))}},{key:"commandContextChanged",value:function(e){var t=this;if(e.detail.value)switch(e.detail.value){case"/":case"*":case"?":case">":this.commandContext=e.detail.value,this.items=this.filterItems(this.allItems,this.context)}else this.commandContext="*",this.items=this.filterItems(this.allItems,this.context);this.voiceSearch&&setTimeout((function(){e.detail.label?(t.__closeLock=!0,t.listeningForInput=!1,t.hal.speak("".concat(e.detail.label," mode activated")).then((function(e){t.playSound().then((function(e){t.reprocessVoiceCommands(),t.__closeLock=!1,t.listeningForInput=!0}))}))):t.reprocessVoiceCommands()}),0)}},{key:"allowedCallback",value:function(){return!0}}],[{key:"properties",get:function(){return T(T({},U(z(i),"properties",this)),{},{santaMode:{type:Boolean,reflect:!0,attribute:"santa-mode"},opened:{type:Boolean,reflect:!0},loading:{type:Boolean,reflect:!0},key1:{type:String},key2:{type:String},icon:{type:String},items:{type:Array},programResults:{type:Array},programName:{type:String},allItems:{type:Array},context:{type:Array},commandContext:{type:String},program:{type:String},programSearch:{type:String},like:{type:String},questionTags:{type:Array},value:{type:String},mini:{type:Boolean},activeNode:{type:Object},programTarget:{type:Object},voiceSearch:{type:Boolean,reflect:!0,attribute:"voice-search"},voiceCommands:{type:Object},listeningForInput:{type:Boolean,reflect:!0,attribute:"listening-for-input"}})}},{key:"styles",get:function(){var e=[];return U(z(i),"styles",this)&&(e=U(z(i),"styles",this)),[].concat(Y(e),[n.css(de||(de=G(['\n        :host {\n          display: none;\n        }\n        :host([opened]) {\n          display: block;\n        }\n        web-dialog {\n          --dialog-border-radius: var(--simple-modal-border-radius, 2px);\n          z-index: var(--simple-modal-z-index, 10000) !important;\n          padding: 0;\n          color: var(--simple-colors-default-theme-grey-12, black);\n        }\n        web-dialog::part(dialog) {\n          color: var(--simple-colors-default-theme-grey-12, black);\n          background-color: var(--simple-colors-default-theme-grey-1, white);\n          border: 1px solid var(--simple-modal-border-color, #222);\n          min-height: var(--simple-modal-min-height, unset);\n          min-width: var(--simple-modal-min-width, unset);\n          z-index: var(--simple-modal-z-index, 10000);\n          resize: var(--simple-modal-resize, unset);\n          padding: 0;\n          --dialog-height: var(--simple-modal-height, auto);\n          --dialog-width: var(--simple-modal-width, 75vw);\n          --dialog-max-width: var(--simple-modal-max-width, 100vw);\n          --dialog-max-height: var(--simple-modal-max-height, 100vh);\n        }\n        web-dialog.style-scope.simple-modal {\n          display: none !important;\n        }\n        web-dialog[open].style-scope.simple-modal {\n          display: flex !important;\n          position: fixed !important;\n          margin: auto;\n        }\n        :host([resize="none"]) web-dialog[open].style-scope.simple-modal,\n        :host([resize="horizontal"]) web-dialog[open].style-scope.simple-modal {\n          top: calc(50% - var(--simple-modal-height, auto) / 2);\n        }\n        :host([resize="none"]) web-dialog[open].style-scope.simple-modal,\n        :host([resize="vertical"]) web-dialog[open].style-scope.simple-modal {\n          left: calc(50% - var(--simple-modal-width, 75vw) / 2);\n        }\n        #cancel {\n          position: absolute;\n          right: 0px;\n          top: 0px;\n          z-index: 100000000;\n          display: block;\n          margin: 0;\n          --simple-icon-width: 24px;\n          --simple-icon-height: 24px;\n        }\n        absolute-position-behavior {\n          z-index: var(--simple-modal-z-index, 10000);\n          min-width: 280px;\n          color: var(--simple-colors-default-theme-grey-12, black);\n          background-color: var(--simple-colors-default-theme-grey-1, white);\n        }\n        absolute-position-behavior super-daemon-ui {\n          margin-top: -46px;\n          color: var(--simple-colors-default-theme-grey-12, black);\n          background-color: var(--simple-colors-default-theme-grey-1, white);\n          width: 400px;\n          margin-left: 14px;\n          padding-top: 8px;\n        }\n        super-daemon-ui {\n          color: var(--simple-colors-default-theme-grey-12, black);\n          background-color: var(--simple-colors-default-theme-grey-1, white);\n        }\n      '])))])}},{key:"tag",get:function(){return"super-daemon"}}]),i}(f.SimpleColors);customElements.define(me.tag,me),window.SuperDaemonManager=window.SuperDaemonManager||{},window.SuperDaemonManager.requestAvailability=function(){return window.SuperDaemonManager.instance||(window.SuperDaemonManager.instance=document.createElement("super-daemon"),document.body.appendChild(window.SuperDaemonManager.instance)),window.SuperDaemonManager.instance};var fe=window.SuperDaemonManager.requestAvailability();e.SuperDaemon=me,e.SuperDaemonInstance=fe,Object.defineProperty(e,"__esModule",{value:!0})}));
