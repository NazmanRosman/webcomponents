!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@lrnwebcomponents/multiple-choice/lib/confetti-container.js"),require("lit"),require("@lrnwebcomponents/simple-toolbar/lib/simple-toolbar-button.js"),require("@lrnwebcomponents/i18n-manager/lib/I18NMixin.js")):"function"==typeof define&&define.amd?define(["exports","@lrnwebcomponents/multiple-choice/lib/confetti-container.js","lit","@lrnwebcomponents/simple-toolbar/lib/simple-toolbar-button.js","@lrnwebcomponents/i18n-manager/lib/I18NMixin.js"],t):t((e="undefined"!=typeof globalThis?globalThis:e||self).MarkTheWords={},e.$$0,e.lit,null,e.I18NMixin_js)}(this,(function(e,t,n,r,o){"use strict";function i(e){if(e&&e.__esModule)return e;var t=Object.create(null);return e&&Object.keys(e).forEach((function(n){if("default"!==n){var r=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(t,n,r.get?r:{enumerable:!0,get:function(){return e[n]}})}})),t.default=e,Object.freeze(t)}var s,a,c,l,u,d,p=i(t);function f(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function h(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?f(Object(n),!0).forEach((function(t){m(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):f(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function b(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,k(r.key),r)}}function m(e,t,n){return(t=k(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function y(e){return y=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},y(e)}function g(e,t){return g=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},g(e,t)}function v(e,t){if(t&&("object"==typeof t||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function w(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=y(e);if(t){var o=y(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return v(this,n)}}function x(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=y(e)););return e}function O(){return O="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=x(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},O.apply(this,arguments)}function j(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}function k(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}var A=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&g(e,t)}(f,e);var t,r,o,i=w(f);function f(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,f),(e=i.call(this)).answers=null,e.correctAnswers=[],e.wordList=e.innerText.split(/\s+/g),e.question="Mark the words that are correct",e.isEnabled=!0,e.numberCorrect=0,e.numberGuessed=0,e._haxstate=!1,e.demoMode=!1,e.t={check:"Check",tryAgain:"Try Again",editMode:"Edit Mode",tryMode:"Try Mode"},e}return t=f,o=[{key:"tag",get:function(){return"mark-the-words"}},{key:"properties",get:function(){return h(h({},O(y(f),"properties",this)),{},{wordList:{type:Array},demoMode:{type:Boolean},answers:{type:String},correctAnswers:{type:Array},missedAnswers:{type:Array},question:{type:String},isEnabled:{type:Boolean},_haxstate:{type:Boolean},numberCorrect:{type:Number},numberGuessed:{type:Number}})}},{key:"styles",get:function(){return[n.css(d||(d=j(['\n    :host {\n      display: grid;\n      padding: 16px;\n      margin: 0px;\n      border: 2px solid black;\n    }\n    span {\n      display: inline-flex;\n      font-size: var(--x-ample-font-size, 24px);\n      padding: 2px;\n      margin: 0 2px;\n    }\n    span:hover,span:focus\n    {\n      outline: 2px dashed blue;\n      cursor: pointer;        \n    }\n    span[data-selected] {\n      outline: 2px solid purple;\n    }\n    span[data-selected]:hover,\n    span[data-selected]:focus\n    {\n      outline: 2px solid blue;\n    }\n    span[data-status="correct"] {\n      outline: 2px solid purple;\n    }\n    span[data-status="correct"]::after {\n      content: "+1";\n      font-size: 14px;\n      color: green;\n      font-weight: bold;\n      border-radius: 50%;\n      border: 2px solid purple;\n      padding: 4px;\n      margin-left: 8px;\n      line-height: 14px;\n    }\n    span[data-status="incorrect"] {\n      outline: 2px solid red;\n    }\n    span[data-status="incorrect"]::after {\n      content: "-1";\n      font-size: 14px;\n      color: red;\n      font-weight: bold;\n      border-radius: 50%;\n      border: 2px solid red;\n      padding: 4px;\n      margin-left: 8px;\n      line-height: 14px;\n    }\n    span[check-mode="active"]{\n      pointer-events: none;\n    }\n    .buttons{\n      grid-column: 1;\n      grid-row: 3;\n      margin: 8px;\n    }\n    .correct{\n      grid-column: 1;\n      grid-row: 3;\n      margin-top:20px;\n    }\n    .question {\n      margin-bottom:0px;\n      margin-top:0px;\n      grid-column: 1;\n      grid-row: 1;\n    }\n    .text {\n      grid-column:1;\n      grid-row: 2;\n      margin-top: 0px;\n    }\n    .scoreExp {\n      margin-top: 1px;\n      margin-bottom: 1px;\n      text-decoration: underline;\n    }\n  '])))]}},{key:"haxProperties",get:function(){return new URL("./lib/".concat(this.tag,".haxProperties.json"),"undefined"==typeof document&&"undefined"==typeof location?new(require("url").URL)("file:"+__filename).href:"undefined"==typeof document?location.href:document.currentScript&&document.currentScript.src||new URL("mark-the-words.umd.js",document.baseURI).href).href}}],(r=[{key:"updated",value:function(e){var t=this;O(y(f.prototype),"updated",this).call(this,e),e.forEach((function(e,n){if("wordList"===n&&t.rebuildContents(t[n]),"answers"===n&&t[n]){t.correctAnswers=t[n].split(",");for(var r=0;r<t.correctAnswers.length;r++)t.correctAnswers[r]=t.correctAnswers[r].toUpperCase()}"numberCorrect"===n&&t.numberCorrect===t.numberGuessed&&0!==t.numberCorrect&&0!==t.numberGuessed&&Promise.resolve(p).then((function(e){setTimeout((function(){t.shadowRoot.querySelector("#confetti").setAttribute("popped","")}),0)}))}))}},{key:"rebuildContents",value:function(e){var t=this;this.shadowRoot.querySelector(".text").innerHTML="",e.forEach((function(e){var n=document.createElement("span");n.innerText=e,n.setAttribute("tabindex","-1"),n.addEventListener("click",t.selectWord.bind(t)),t.shadowRoot.querySelector(".text").appendChild(n)}))}},{key:"selectWord",value:function(e){e.target.getAttribute("data-selected")?e.target.removeAttribute("data-selected"):e.target.setAttribute("data-selected","data-selected")}},{key:"checkAnswer",value:function(e){if(this.isEnabled){this.isEnabled=!1;for(var t=0;t<this.wordList.length;t++)this.correctAnswers.includes(this.wordList[t].replace(/[&#^,+()$~%.":*?<>{}]/g,"").toUpperCase())&&this.numberCorrect++;var n=this.shadowRoot.querySelectorAll(".text span[data-selected]");for(t=0;t<n.length;t++){var r=n[t];this.correctAnswers.includes(r.innerText.replace(/[&#^,+()$~%.":*?<>{}]/g,"").toUpperCase())?(r.setAttribute("data-status","correct"),this.numberGuessed++):(r.setAttribute("data-status","incorrect"),this.numberGuessed>0&&this.numberGuessed--)}var o=this.shadowRoot.querySelectorAll(".text span");for(t=0;t<o.length;t++)o[t].setAttribute("check-mode","active")}else{this.isEnabled=!0,this.numberGuessed=0,this.numberCorrect=0;var i=this.shadowRoot.querySelectorAll(".text span[data-selected]");for(t=0;t<i.length;t++){var s=i[t];s.getAttribute("data-status")&&(s.removeAttribute("data-status"),s.removeAttribute("data-selected"))}var a=this.shadowRoot.querySelectorAll(".text span");for(t=0;t<a.length;t++)a[t].setAttribute("check-mode","inactive")}}},{key:"render",value:function(){return n.html(s||(s=j(['\n    <confetti-container id="confetti">\n      <p class="question">',"</p>\n      ",'      \n      <div class="buttons">\n        <simple-toolbar-button @click="','" icon="check" label="','" show-text-label icon-position="left" align-vertical="center" align-horizontal="center"></simple-toolbar-button>\n        ',"\n        ","\n      </div>\n    </confetti-container>\n    "])),this.question,this._haxstate&&this.demoMode?n.html(a||(a=j(["<slot></slot>"]))):n.html(c||(c=j(['<div class="text"></div>']))),this.checkAnswer,this.isEnabled?this.t.check:this.t.tryAgain,this.isEnabled?"":n.html(l||(l=j(["","/"," ","%"])),this.numberGuessed,this.numberCorrect,Math.round(this.numberGuessed/this.numberCorrect*100*10)/10),this._haxstate?n.html(u||(u=j(['<simple-toolbar-button @click="','" icon="','" label="','" show-text-label icon-position="left" align-vertical="center" align-horizontal="center"></simple-toolbar-button>'])),this.toggleDemo,this.demoMode?"av:play-circle-filled":"image:edit",this.demoMode?this.t.tryMode:this.t.editMode):"")}},{key:"toggleDemo",value:function(){this.demoMode=!this.demoMode,this.demoMode||(this.wordList=this.innerText.split(/\s+/g))}},{key:"haxHooks",value:function(){return{editModeChanged:"haxeditModeChanged",activeElementChanged:"haxactiveElementChanged"}}},{key:"haxactiveElementChanged",value:function(e,t){t&&(this._haxstate=t)}},{key:"haxeditModeChanged",value:function(e){this._haxstate=e}}])&&b(t.prototype,r),o&&b(t,o),Object.defineProperty(t,"prototype",{writable:!1}),f}(o.I18NMixin(n.LitElement));customElements.define(A.tag,A),e.MarkTheWords=A,Object.defineProperty(e,"__esModule",{value:!0})}));
