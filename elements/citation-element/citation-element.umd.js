!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("lit"),require("@lrnwebcomponents/schema-behaviors/schema-behaviors.js"),require("@lrnwebcomponents/license-element/license-element.js"),require("@lrnwebcomponents/utils/utils.js")):"function"==typeof define&&define.amd?define(["exports","lit","@lrnwebcomponents/schema-behaviors/schema-behaviors.js","@lrnwebcomponents/license-element/license-element.js","@lrnwebcomponents/utils/utils.js"],t):t((e="undefined"!=typeof globalThis?globalThis:e||self).CitationElement={},e.lit,e.schemaBehaviors_js,e.licenseElement_js,e.utils_js)}(this,(function(e,t,n,r,i){"use strict";function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){u(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e){return s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s(e)}function l(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function u(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e){return a=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},a(e)}function f(e,t){return f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},f(e,t)}function p(e,t){if(t&&("object"==typeof t||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function h(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=a(e);if(t){var i=a(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return p(this,n)}}function b(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=a(e)););return e}function d(){return d="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=b(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(arguments.length<3?e:n):i.value}},d.apply(this,arguments)}function y(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var m,g,v=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&f(e,t)}(b,e);var n,o,u,p=h(b);function b(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,b),(e=p.call(this)).scope="sibling",e.source="",e}return n=b,u=[{key:"styles",get:function(){return[t.css(g||(g=y(['\n        :host {\n          display: block;\n          color: var(--license-text-color);\n        }\n        :host([display-method="footnote"]) {\n          visibility: hidden;\n          opacity: 0;\n        }\n        :host([display-method="popup"]) {\n          display: block;\n        }\n        .license-link {\n          font-size: 16px;\n          line-height: 16px;\n          font-style: italic;\n        }\n        .citation-date {\n          font-size: 16px;\n          line-height: 16px;\n          font-style: italic;\n        }\n        .license-link img {\n          margin-right: 8px;\n        }\n      '])))]}},{key:"tag",get:function(){return"citation-element"}},{key:"properties",get:function(){return c(c({},d(a(b),"properties",this)),{},{title:{type:String},scope:{type:String},displayMethod:{type:String,reflect:!0,attribute:"display-method"},creator:{type:String},source:{type:String},date:{type:String},licenseName:{type:String,attribute:"license-name"},licenseLink:{type:String,attribute:"license-link"},license:{type:String}})}},{key:"haxProperties",get:function(){return new URL("./lib/".concat(this.tag,".haxProperties.json"),"undefined"==typeof document&&"undefined"==typeof location?new(require("url").URL)("file:"+__filename).href:"undefined"==typeof document?location.href:document.currentScript&&document.currentScript.src||new URL("citation-element.umd.js",document.baseURI).href).href}}],(o=[{key:"render",value:function(){return t.html(m||(m=y(['\n      <meta\n        about="','"\n        property="cc:attributionUrl"\n        content="','"\n      />\n      <meta\n        about="','"\n        property="cc:attributionName"\n        typeof="oer:Text"\n        content="','"\n      />\n      <meta\n        rel="cc:license"\n        href="','"\n        content="License: ','"\n      />\n      <cite\n        ><a target="_blank" rel="noopener noreferrer" href="','"\n          >',"</a\n        >\n        by ",', licensed under\n        <a\n          class="license-link"\n          rel="noopener noreferrer"\n          target="_blank"\n          href="','"\n          ><img\n            loading="lazy"\n            alt="',' graphic"\n            src="','"\n            ?hidden="','"\n            width="44px"\n            height="16px"\n          />','</a\n        >. Accessed <span class="citation-date">',"</span>.</cite\n      >\n    "])),this.relatedResource,this.source,this.relatedResource,this.title,this.licenseLink,this.licenseName,this.source,this.title,this.creator,this.licenseLink,this.licenseName,this.licenseImage,!this.licenseImage,this.licenseName,this.date)}},{key:"updated",value:function(e){var t=this;e.forEach((function(e,n){"scope"==n&&t._scopeChanged(t[n]),"license"==n&&t._licenseUpdated(t[n]),["relatedResource","licenseLink"].includes(n)&&(t._aboutLink=t._generateAboutLink(t.relatedResource,t.licenseLink)),"source"==n&&(t._licenseLink=t._generateLicenseLink(t.source))}))}},{key:"_generateLicenseLink",value:function(e){this._licenseLink&&document.head.removeChild(this._licenseLink);var t=document.createElement("link");return t.setAttribute("typeof","resource"),t.setAttribute("rel","license"),t.setAttribute("src",e),document.head.appendChild(t),t}},{key:"_generateAboutLink",value:function(e,t){this._aboutLink&&document.head.removeChild(this._aboutLink);var n=document.createElement("link");return n.setAttribute("about",e),n.setAttribute("property","cc:license"),n.setAttribute("content",t),document.head.appendChild(n),n}},{key:"_scopeChanged",value:function(e){if("sibling"===e&&null!==this.previousElementSibling){if(this.previousElementSibling.getAttribute("resource"))this.relatedResource=this.previousElementSibling.getAttribute("resource");else{var t=i.generateResourceID();this.relatedResource=t,this.previousElementSibling.setAttribute("resource",t)}this.previousElementSibling.setAttribute("prefix",this.getAttribute("prefix"))}else if("parent"===e){if(this.parentNode.getAttribute("resource"))this.relatedResource=this.parentNode.getAttribute("resource");else{var n=i.generateResourceID();this.relatedResource=n,this.parentNode.setAttribute("resource",n)}this.parentNode.setAttribute("prefix",this.getAttribute("prefix"))}}},{key:"_licenseUpdated",value:function(e){if("undefined"!==s(e)){var t=new r.licenseList;"undefined"!==s(t[e])&&(this.licenseName=t[e].name,this.licenseLink=t[e].link,this.licenseImage=t[e].image)}}}])&&l(n.prototype,o),u&&l(n,u),Object.defineProperty(n,"prototype",{writable:!1}),b}(n.SchemaBehaviors(t.LitElement));window.customElements.define(v.tag,v),e.CitationElement=v,Object.defineProperty(e,"__esModule",{value:!0})}));
