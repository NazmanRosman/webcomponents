!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("lit"),require("@lrnwebcomponents/i18n-manager/lib/I18NMixin.js"),require("lit/directives/unsafe-html.js"),require("@lrnwebcomponents/hax-body/lib/hax-store"),require("@lrnwebcomponents/haxcms-elements/lib/core/haxcms-site-store.js"),require("mobx"),require("@lrnwebcomponents/json-outline-schema/lib/json-outline-schema-item.js"),require("@lrnwebcomponents/json-outline-schema/json-outline-schema.js"),require("@lrnwebcomponents/simple-popover/simple-popover.js"),require("@lrnwebcomponents/simple-icon/lib/simple-icon-lite.js"),require("@lrnwebcomponents/hax-iconset/lib/simple-hax-iconset.js"),require("@lrnwebcomponents/simple-icon/lib/simple-icon-button.js"),require("@lrnwebcomponents/simple-fields/lib/simple-fields-field.js"),require("@lrnwebcomponents/utils/utils.js")):"function"==typeof define&&define.amd?define(["exports","lit","@lrnwebcomponents/i18n-manager/lib/I18NMixin.js","lit/directives/unsafe-html.js","@lrnwebcomponents/hax-body/lib/hax-store","@lrnwebcomponents/haxcms-elements/lib/core/haxcms-site-store.js","mobx","@lrnwebcomponents/json-outline-schema/lib/json-outline-schema-item.js","@lrnwebcomponents/json-outline-schema/json-outline-schema.js","@lrnwebcomponents/simple-popover/simple-popover.js","@lrnwebcomponents/simple-icon/lib/simple-icon-lite.js","@lrnwebcomponents/hax-iconset/lib/simple-hax-iconset.js","@lrnwebcomponents/simple-icon/lib/simple-icon-button.js","@lrnwebcomponents/simple-fields/lib/simple-fields-field.js","@lrnwebcomponents/utils/utils.js"],t):t((e="undefined"!=typeof globalThis?globalThis:e||self).OutlineDesigner={},e.lit,e.I18NMixin_js,e.unsafeHtml_js,e.haxStore,e.haxcmsSiteStore_js,e.mobx,e.jsonOutlineSchemaItem_js,e.jsonOutlineSchema_js,null,null,null,null,null,e.utils_js)}(this,(function(e,t,n,i,o,r,a,s,l,c,d,u,p,h,m){"use strict";function f(){f=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,i=Object.defineProperty||function(e,t,n){e[t]=n.value},o="function"==typeof Symbol?Symbol:{},r=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",s=o.toStringTag||"@@toStringTag";function l(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(e){l=function(e,t,n){return e[t]=n}}function c(e,t,n,o){var r=t&&t.prototype instanceof p?t:p,a=Object.create(r.prototype),s=new T(o||[]);return i(a,"_invoke",{value:k(e,n,s)}),a}function d(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}e.wrap=c;var u={};function p(){}function h(){}function m(){}var v={};l(v,r,(function(){return this}));var g=Object.getPrototypeOf,b=g&&g(g(j([])));b&&b!==t&&n.call(b,r)&&(v=b);var y=m.prototype=p.prototype=Object.create(v);function w(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function x(e,t){function o(i,r,a,s){var l=d(e[i],e,r);if("throw"!==l.type){var c=l.arg,u=c.value;return u&&"object"==typeof u&&n.call(u,"__await")?t.resolve(u.__await).then((function(e){o("next",e,a,s)}),(function(e){o("throw",e,a,s)})):t.resolve(u).then((function(e){c.value=e,a(c)}),(function(e){return o("throw",e,a,s)}))}s(l.arg)}var r;i(this,"_invoke",{value:function(e,n){function i(){return new t((function(t,i){o(e,n,t,i)}))}return r=r?r.then(i,i):i()}})}function k(e,t,n){var i="suspendedStart";return function(o,r){if("executing"===i)throw new Error("Generator is already running");if("completed"===i){if("throw"===o)throw r;return O()}for(n.method=o,n.arg=r;;){var a=n.delegate;if(a){var s=A(a,n);if(s){if(s===u)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===i)throw i="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);i="executing";var l=d(e,t,n);if("normal"===l.type){if(i=n.done?"completed":"suspendedYield",l.arg===u)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(i="completed",n.method="throw",n.arg=l.arg)}}}function A(e,t){var n=t.method,i=e.iterator[n];if(void 0===i)return t.delegate=null,"throw"===n&&e.iterator.return&&(t.method="return",t.arg=void 0,A(e,t),"throw"===t.method)||"return"!==n&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+n+"' method")),u;var o=d(i,e.iterator,t.arg);if("throw"===o.type)return t.method="throw",t.arg=o.arg,t.delegate=null,u;var r=o.arg;return r?r.done?(t[e.resultName]=r.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,u):r:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,u)}function I(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function L(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function T(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(I,this),this.reset(!0)}function j(e){if(e){var t=e[r];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var i=-1,o=function t(){for(;++i<e.length;)if(n.call(e,i))return t.value=e[i],t.done=!1,t;return t.value=void 0,t.done=!0,t};return o.next=o}}return{next:O}}function O(){return{value:void 0,done:!0}}return h.prototype=m,i(y,"constructor",{value:m,configurable:!0}),i(m,"constructor",{value:h,configurable:!0}),h.displayName=l(m,s,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===h||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,m):(e.__proto__=m,l(e,s,"GeneratorFunction")),e.prototype=Object.create(y),e},e.awrap=function(e){return{__await:e}},w(x.prototype),l(x.prototype,a,(function(){return this})),e.AsyncIterator=x,e.async=function(t,n,i,o,r){void 0===r&&(r=Promise);var a=new x(c(t,n,i,o),r);return e.isGeneratorFunction(n)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},w(y),l(y,s,"Generator"),l(y,r,(function(){return this})),l(y,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),n=[];for(var i in t)n.push(i);return n.reverse(),function e(){for(;n.length;){var i=n.pop();if(i in t)return e.value=i,e.done=!1,e}return e.done=!0,e}},e.values=j,T.prototype={constructor:T,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(L),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function i(n,i){return a.type="throw",a.arg=e,t.next=n,i&&(t.method="next",t.arg=void 0),!!i}for(var o=this.tryEntries.length-1;o>=0;--o){var r=this.tryEntries[o],a=r.completion;if("root"===r.tryLoc)return i("end");if(r.tryLoc<=this.prev){var s=n.call(r,"catchLoc"),l=n.call(r,"finallyLoc");if(s&&l){if(this.prev<r.catchLoc)return i(r.catchLoc,!0);if(this.prev<r.finallyLoc)return i(r.finallyLoc)}else if(s){if(this.prev<r.catchLoc)return i(r.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<r.finallyLoc)return i(r.finallyLoc)}}}},abrupt:function(e,t){for(var i=this.tryEntries.length-1;i>=0;--i){var o=this.tryEntries[i];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var r=o;break}}r&&("break"===e||"continue"===e)&&r.tryLoc<=t&&t<=r.finallyLoc&&(r=null);var a=r?r.completion:{};return a.type=e,a.arg=t,r?(this.method="next",this.next=r.finallyLoc,u):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),u},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),L(n),u}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var i=n.completion;if("throw"===i.type){var o=i.arg;L(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:j(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),u}},e}function v(e,t,n,i,o,r,a){try{var s=e[r](a),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(i,o)}function g(e){return function(){var t=this,n=arguments;return new Promise((function(i,o){var r=e.apply(t,n);function a(e){v(r,i,o,a,s,"next",e)}function s(e){v(r,i,o,a,s,"throw",e)}a(void 0)}))}}function b(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,(o=i.key,r=void 0,"symbol"==typeof(r=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(o,"string"))?r:String(r)),i)}var o,r}function y(e){return y=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},y(e)}function w(e,t){return w=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},w(e,t)}function x(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function k(e,t){if(t&&("object"==typeof t||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return x(e)}function A(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=y(e);if(t){var o=y(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return k(this,n)}}function I(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=y(e)););return e}function L(){return L="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var i=I(e,t);if(i){var o=Object.getOwnPropertyDescriptor(i,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},L.apply(this,arguments)}function T(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}function j(e){return function(e){if(Array.isArray(e))return O(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return O(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return O(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function O(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}var _,E,P,C,S,D,N,M,U,R,q,H,z,F=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&w(e,t)}(h,e);var n,c,d,u,p=A(h);function h(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,h),(e=p.call(this))._blurBlock=!1,e.fidelity="medium",e.haxGizmos=[],e.hideDelete=!1,e.activeItemForActions=null,e.storeTools=!1,e.hideContentOps=!1,e.items=[],e.appReady=!1,e.eventData={},e.activeId=null,e.activePreview=null,e.activePreviewIndex=-1,e.t={selectTarget:"Select target",importContentUnderThisPage:"Import content under this page",importThisContent:"Import this content",thisPage:"this page",newPage:"New page",copyOf:"Copy of"},e.registerLocalization({context:x(e),basePath:"undefined"==typeof document&&"undefined"==typeof location?new(require("url").URL)("file:"+__filename).href:"undefined"==typeof document?location.href:document.currentScript&&document.currentScript.src||new URL("outline-designer.umd.js",document.baseURI).href,locales:["es"]}),a.autorun((function(){e.activeId=a.toJS(r.store.activeId)})),a.autorun((function(){e.appReady=a.toJS(r.store.appReady)})),a.autorun((function(){e.haxGizmos=a.toJS(o.HAXStore.gizmoList).filter((function(e){return!!(e&&e.meta&&e.meta.outlineDesigner)}))})),e.addEventListener("click",e.resetPopOver.bind(x(e))),e}return n=h,c=[{key:"resetPopOver",value:function(){this.activePreview&&(this.shadowRoot.querySelector("simple-popover").setAttribute("hidden","hidden"),this.activePreview=null,this.activePreviewIndex=-1)}},{key:"getSiteItems",value:function(){var e=[{text:this.t.selectTarget,value:null}];if(this.appReady&&this.items.length>0){var t=r.store.getManifestItems(!0);t.forEach((function(n){for(var i=n,o="- ";i&&null!=i.parent;)(i=t.find((function(e){return e.id==i.parent})))&&(o="--"+o);e.push({text:o+n.title,value:n.id})}))}return e}},{key:"render",value:function(){var e=this;return t.html(_||(_=T([' <div class="controls">\n        ','\n        <simple-icon-button-lite\n          class="control"\n          icon="add"\n          @click="','"\n          >Add page</simple-icon-button-lite\n        >\n        <simple-icon-button-lite\n          icon="hardware:keyboard-arrow-right"\n          @click="','"\n          class="control"\n          >Collapse all</simple-icon-button-lite\n        >\n        <simple-icon-button-lite\n          icon="hardware:keyboard-arrow-down"\n          @click="','"\n          class="control"\n          >Expand all</simple-icon-button-lite\n        >\n        ','\n      </div>\n      <ul id="list">\n        ','\n      </ul>\n      <simple-popover auto for="list" hidden>\n        <simple-icon-button\n          @click="','"\n          title="Close"\n          icon="cancel"\n          class="close-btn"\n        ></simple-icon-button>\n        ',"\n      </simple-popover>"])),this.storeTools?t.html(E||(E=T(['\n              <label for="targetselector">','</label>\n              <simple-fields-field\n                id="targetselector"\n                type="select"\n                value="children"\n                .itemsList="','"\n              ></simple-fields-field>\n              ',':\n              <simple-fields-field\n                id="itemselector"\n                type="select"\n                value="','"\n                .itemsList="','"\n              ></simple-fields-field>\n              <label for="itemselector"\n                >',"</label\n              >\n            "])),this.t.importThisContent,[{text:"as children of",value:"children"},{text:"Above",value:"above"},{text:"Below",value:"below"}],this.t.thisPage,this.activeId,this.getSiteItems(),this.t.importContentUnderThisPage):"",this.addItemToTop,this.collapseAll,this.expandAll,this.hasDeletedItems()?t.html(P||(P=T(['<simple-icon-button-lite\n              icon="delete"\n              @click="','"\n              class="control"\n              >',"</simple-icon-button-lite\n            >"])),this.toggleDelete,this.hideDelete?"Show Deleted":"Hide Deleted"):"",this.items.map((function(t,n){return""===e.getItemParentsCollapsed(t)?e.renderItem(t,n):""})),this.resetPopOver,this.renderActiveContentItem(this.activePreview,this.activePreviewIndex))}},{key:"hasDeletedItems",value:function(){return!!this.items.find((function(e){return 1==e.delete}))}},{key:"toggleDelete",value:function(e){this.hideDelete=!this.hideDelete}},{key:"renderActiveContentItem",value:function(e,n){if(e&&-1!=n){var o=this.items.find((function(t){return t.id===e.getAttribute("data-content-parent-id")}));if(o.contents){var r=document.createElement("div");r.innerHTML=o.contents;for(var a=0;a<r.childNodes.length;a++){var s=r.childNodes[a];if(a===n)return t.html(C||(C=T(["",""])),i.unsafeHTML(m.encapScript(s.outerHTML)))}}}}},{key:"setActiveItemForActions",value:function(e){this.activeItemForActions=e.target.closest("[data-item-id]").getAttribute("data-item-id")}},{key:"renderItem",value:function(e,n){var i=this;return t.html(S||(S=T(['\n      <li\n        @dragenter="','"\n        @dragleave="','"\n        @mouseenter="','"\n        class="item indent-'," "," ",'"\n        data-item-id="','"\n        @focusin="','"\n        data-parents="','"\n        ?data-has-children="','"\n        ?data-about-to-delete="','"\n        ?hidden="','"\n      >\n        <simple-icon-button\n          ?disabled="','"\n          class="collapse-btn"\n          icon="','"\n          @click="','"\n        ></simple-icon-button>\n        <simple-icon-button\n          ?disabled="','"\n          @dragstart="','"\n          @dragend="','"\n          draggable="','"\n          icon="hax:arrow-all"\n        ></simple-icon-button>\n        <simple-icon-button-lite\n          ?disabled="','"\n          ?hidden="','"\n          icon="editor:insert-drive-file"\n          @click="','"\n          title="Content structure"\n        >\n          ','\n        </simple-icon-button-lite>\n        <span\n          class="label shown"\n          ?disabled="','"\n          @dblclick="','"\n          >','</span\n        >\n        <span\n          class="label-edit"\n          @blur="','"\n          @keypress="','"\n          @keydown="','"\n        ></span>\n        <div class="operations">\n          ',"\n        </div>\n      </li>\n      ","\n    "])),this._dragEnter,this._dragLeave,this.setActiveItemForActions,e.indent<20?e.indent:20,e.modified?"modified":"",this.getItemParentsCollapsed(e),e.id,this.setActiveItemForActions,this.getItemParents(e),this.hasChildren(e.id),e.delete,this.hideDelete&&e.delete,this.isLocked(n),this.isCollapsed(e.id)?"hardware:keyboard-arrow-right":"hardware:keyboard-arrow-down",this.collapseExpand,this.isLocked(n),this._dragStart,this._dragEnd,!this.isLocked(n),this.isLocked(n),this.hideContentOps||""===e.contents||!e.contents,this.toggleContent,e.new?t.html(D||(D=T(['<simple-icon\n                ?disabled="','"\n                icon="av:fiber-new"\n                title="','"\n                class="new"\n                accent-color="green"\n                dark\n                contrast="1"\n              ></simple-icon>'])),this.isLocked(n),this.t.newPage):"",this.isLocked(n),this.editTitle,e.title,this.blurTitle,this.monitorTitle,this.monitorEsc,this.activeItemForActions===e.id?t.html(N||(N=T(['\n                <simple-icon-button\n                  part="lockbtn"\n                  class="operation lock"\n                  icon="','"\n                  @click="','"\n                  title="Lock / Unlock"\n                ></simple-icon-button>\n                <simple-icon-button\n                  class="operation"\n                  icon="hax:outline-designer-outdent"\n                  @click="','"\n                  title="Move next to parent"\n                  ?disabled="','"\n                ></simple-icon-button>\n                <simple-icon-button\n                  class="operation"\n                  icon="hax:keyboard-arrow-up"\n                  @click="','"\n                  title="Move up"\n                  ?disabled="','"\n                ></simple-icon-button>\n                <simple-icon-button\n                  class="operation"\n                  icon="hax:keyboard-arrow-down"\n                  @click="','"\n                  title="Move down"\n                  ?disabled="','"\n                ></simple-icon-button>\n                <simple-icon-button\n                  class="operation"\n                  icon="hax:outline-designer-indent"\n                  @click="','"\n                  title="Make child"\n                  ?disabled="','"\n                ></simple-icon-button>\n                <simple-icon-button\n                  class="operation add"\n                  icon="add"\n                  accent-color="green"\n                  @click="','"\n                  title="Add"\n                  ?disabled="','"\n                ></simple-icon-button>\n                <simple-icon-button\n                  class="operation"\n                  icon="content-copy"\n                  accent-color="green"\n                  @click="','"\n                  title="Duplicate"\n                  ?disabled="','"\n                ></simple-icon-button>\n                <simple-icon-button\n                  class="operation del"\n                  icon="','"\n                  accent-color="red"\n                  @click="','"\n                  title="','"\n                  ?disabled="','"\n                ></simple-icon-button>\n              '])),this.isLocked(n)?"icons:lock":"icons:lock-open",(function(e){return i.itemOp(n,"lock")}),(function(e){return i.itemOp(n,"out")}),this.isLocked(n),(function(e){return i.itemOp(n,"up")}),this.isLocked(n),(function(e){return i.itemOp(n,"down")}),this.isLocked(n),(function(e){return i.itemOp(n,"in")}),this.isLocked(n),(function(e){return i.itemOp(n,"add")}),this.isLocked(n),(function(e){return i.itemOp(n,"duplicate")}),this.isLocked(n),e.delete?"hax:delete-restore":"delete",(function(e){return i.itemOp(n,"delete")}),e.delete?"Restore":"Delete",this.isLocked(n)):"",!this.hideContentOps&&e.showContent?this.renderItemContents(e):"")}},{key:"hasContents",value:function(e){return!(!e.contents||""==e.contents)}},{key:"renderItemContents",value:function(e){var t=this,n=[this.itemContentsOperations(e)];if(e.contents){var i=document.createElement("div");i.innerHTML=e.contents;var o=1,r=0;i.childNodes.forEach((function(i,a){r=0,["h1","h2","h3","h4","h5","h6"].includes(i.tagName.toLowerCase())&&(o=parseInt(i.tagName.toLowerCase().replace("h","")),r=-1),n.push(t.renderNodeAsItem(i,a,e,parseInt(e.indent)+o+r))}))}return n}},{key:"itemContentsOperations",value:function(e){var n=this;return t.html(M||(M=T([' <li\n      class="item content-adding-operations indent-','"\n      data-item-for-content-id="','"\n      ?data-contents-collapsed="','"\n      ?data-about-to-delete="','"\n      ?hidden="','"\n    >\n      ',"\n    </li>"])),e.indent<20?e.indent:20,e.id,!e.showContent,e.delete,this.hideDelete&&e.delete,this.haxGizmos.map((function(e){return t.html(U||(U=T(['\n          <simple-icon-button-lite\n            class="operation"\n            icon="','"\n            value="','"\n            @click="','"\n            >Add ',"</simple-icon-button-lite\n          >\n        "])),e.icon,e.tag,n.prependNodeToContent,e.title)})))}},{key:"prependNodeToContent",value:function(e){var t=this,n=e.target.closest("[data-item-for-content-id]").getAttribute("data-item-for-content-id");this.items.map((function(i,r){if(i.id===n&&e.target.value){var a,s=o.HAXStore.haxSchemaFromTag(e.target.value);a=s.gizmo&&s.gizmo.tag&&s.demoSchema&&s.demoSchema[0]?m.haxElementToNode(s.demoSchema[0]):document.createElement(tag),t.items[r].contents=a.outerHTML+i.contents,t.resetPopOver(),t.__syncUIAndDataModel()}}))}},{key:"renderNodeAsItem",value:function(e,n,i,r){var a=this,s=e.tagName.toLowerCase(),l="hax:bricks",c=s,d="non-heading",u=o.HAXStore.haxSchemaFromTag(s);if(u&&u.gizmo)switch(l=u.gizmo.icon,c=u.gizmo.title,s){case"h1":case"h2":case"h3":case"h4":case"h5":case"h6":c=e.innerText,d="heading"}return t.html(R||(R=T([' <li\n      class="item content-child content-'," indent-",'"\n      data-node-index="','"\n      data-content-parent-id="','"\n      ?data-contents-collapsed="','"\n      ?data-about-to-delete="','"\n      ?hidden="','"\n    >\n      <simple-icon-button-lite\n        icon="','"\n        title="Click to preview"\n        @click="','"\n      ></simple-icon-button-lite>\n      ','\n      <div class="content-operations">\n        <simple-icon-button\n          class="content-operation"\n          icon="hax:outline-designer-outdent"\n          @click="','"\n          title="Increase heading"\n          ?disabled="','"\n          ?hidden="','"\n        ></simple-icon-button>\n        <simple-icon-button\n          icon="hax:keyboard-arrow-up"\n          @click="','"\n          title="Move up"\n          ?disabled="','"\n          class="content-operation"\n        ></simple-icon-button>\n        <simple-icon-button\n          icon="hax:keyboard-arrow-down"\n          @click="','"\n          title="Move down"\n          ?disabled="','"\n          class="content-operation"\n        ></simple-icon-button>\n        <simple-icon-button\n          class="content-operation"\n          icon="hax:outline-designer-indent"\n          @click="','"\n          title="Decrease Heading"\n          ?disabled="','"\n          ?hidden="','"\n        ></simple-icon-button>\n        <simple-icon-button\n          class="content-operation"\n          icon="editor:format-page-break"\n          @click="','"\n          title="Promote to page"\n          ?disabled="','"\n          ?hidden="','"\n        ></simple-icon-button>\n        <simple-icon-button\n          icon="delete"\n          @click="','"\n          class="content-operation del"\n          title="Delete"\n          ?disabled="','"\n          accent-color="red"\n        ></simple-icon-button>\n      </div>\n    </li>'])),d,r<20?r:20,n,i.id,!i.showContent,i.delete,this.hideDelete&&i.delete,l,this.setActivePreview,"heading"===d?t.html(q||(q=T(['\n            <span\n              class="label shown"\n              ?disabled="','"\n              @dblclick="','"\n              >','</span\n            >\n            <span\n              class="label-edit"\n              @keypress="','"\n              @keydown="','"\n            ></span>\n          '])),i.metadata.locked,this.editTitle,c,this.monitorHeading,this.monitorEsc):t.html(H||(H=T(['<span class="label shown">',"</span>"])),c),(function(e){return a.modifyContentAction(e,i,"in")}),"h1"===s||i.metadata.locked,"heading"!==d,(function(e){return a.modifyContentAction(e,i,"up")}),i.metadata.locked,(function(e){return a.modifyContentAction(e,i,"down")}),i.metadata.locked,(function(e){return a.modifyContentAction(e,i,"out")}),"h6"===s||i.metadata.locked,"heading"!==d,(function(e){return a.pageBreakHere(e,i)}),i.metadata.locked,"heading"!==d,(function(e){return a.modifyContentAction(e,i,"delete")}),i.metadata.locked)}},{key:"setActivePreview",value:function(e){var t=e.target.closest("[data-content-parent-id]"),n=parseInt(t.getAttribute("data-node-index"));this.activePreview=t,this.shadowRoot.querySelector("simple-popover").removeAttribute("hidden"),this.shadowRoot.querySelector("simple-popover").target=t,this.activePreviewIndex=n,e.preventDefault(),e.stopPropagation(),e.stopImmediatePropagation()}},{key:"modifyContentAction",value:function(e,t,n){if(!t.metadata.locked){e.preventDefault(),e.stopPropagation(),e.stopImmediatePropagation();var i=e.target.closest("[data-content-parent-id]"),o=i.getAttribute("data-content-parent-id"),r=parseInt(i.getAttribute("data-node-index")),a=this.items.find((function(e){return e.id===o}));if(a.contents){var s=document.createElement("div");s.innerHTML=a.contents;var l="";switch(n){case"up":0!==r&&s.childNodes[r].previousElementSibling.insertAdjacentElement("beforebegin",s.childNodes[r]);break;case"down":r!==s.childNodes.length-1&&s.childNodes[r].nextElementSibling.insertAdjacentElement("afterend",s.childNodes[r])}for(var c=0;c<s.childNodes.length;c++){var d=s.childNodes[c];if(c<r)l+=d.outerHTML;else if(c===r)switch(n){case"delete":this.setAttribute("stop-animation","true");break;case"up":case"down":l+=d.outerHTML;break;case"in":case"out":var u=parseInt(d.tagName.toLowerCase().replace("h","")),p=void 0;"in"===n&&u>1?(p=document.createElement("h".concat(u-1))).innerText=d.innerText:"out"===n&&u<6?(p=document.createElement("h".concat(u+1))).innerText=d.innerText:p=d,l+=p.outerHTML}else l+=d.outerHTML}a.contents=l,this.resetPopOver(),this.__syncUIAndDataModel()}}}},{key:"pageBreakHere",value:function(e,t){if(!t.metadata.locked){e.preventDefault(),e.stopPropagation(),e.stopImmediatePropagation();var n,i=e.target.closest("[data-content-parent-id]"),o=i.getAttribute("data-content-parent-id"),r=parseInt(i.getAttribute("data-node-index")),a=this.items.find((function(e){return e.id===o}));if(this.items.map((function(e,t){return e.id===o?n=t:null})),a.contents){var l=document.createElement("div");l.innerHTML=a.contents;for(var c="",d="",u=this.t.newPage,p=0;p<l.childNodes.length;p++){var h=l.childNodes[p];p<r?c+=h.outerHTML:p===r?""!=h.innerText&&(u=h.innerText):d+=h.outerHTML}a.contents=c;var m=new s.JSONOutlineSchemaItem;m.title=u,m.order=a.order+1,m.parent=a.parent,m.indent=a.indent,m.metadata.locked=!1,m.new=!0,m.contents=d,this.items[n].modified=!0,this.items.splice(n+1,0,m),this.resetPopOver(),this.__syncUIAndDataModel()}}}},{key:"__syncUIAndDataModel",value:function(){var e=this;this._recurseUpdateIndent(),this._schemaOrderUpdate(),setTimeout((function(){e.requestUpdate(),setTimeout((function(){e.removeAttribute("stop-animation")}),300)}),0)}},{key:"collapseAll",value:function(){var e=this;this.items.map((function(t,n){e.hasChildren(t.id)&&!t.collapsed&&(e.items[n].collapsed=!0)})),setTimeout((function(){e.requestUpdate()}),0)}},{key:"expandAll",value:function(){var e=this;this.items.map((function(t,n){e.hasChildren(t.id)&&t.collapsed&&(e.items[n].collapsed=!1)})),setTimeout((function(){e.requestUpdate()}),0)}},{key:"getItemParents",value:function(e){for(var t=this.items.find((function(t){return t.id==e.parent})),n="";t;)n+=t.id+" ",t=this.items.find((function(e){return e.id==t.parent}));return n}},{key:"getItemParentsCollapsed",value:function(e){for(var t=this.items.find((function(t){return t.id==e.parent})),n="";t;)t.collapsed&&t.id&&(n+="collapsed-by-".concat(t.id)+" "),t=this.items.find((function(e){return e.id==t.parent}));return n}},{key:"isCollapsed",value:function(e){return!!this.items.find((function(t){return t.id==e})).collapsed}},{key:"hasChildren",value:function(e){return!!this.items.find((function(t){return t.parent==e}))}},{key:"collapseExpand",value:function(e){var t=this,n=e.target.closest("[data-item-id]").getAttribute("data-item-id");this.items.map((function(e,i){e.id!==n||t.isLocked(i)||(t.items[i].collapsed?t.items[i].collapsed=!1:t.items[i].collapsed=!0,t.requestUpdate())}))}},{key:"toggleContent",value:function(e){var t=this,n=e.target.closest("[data-item-id]");if(n&&!e.target.disabled){var i=n.getAttribute("data-item-id");this.items.map((function(e,n){e.id===i&&(t.items[n].showContent?t.items[n].showContent=!1:t.items[n].showContent=!0)})),this.requestUpdate()}}},{key:"editTitle",value:function(e){e.target.classList.remove("shown");var t=e.target.nextElementSibling;if(t.setAttribute("contenteditable","true"),t.classList.add("shown"),t.innerText=e.target.innerText,t.focus(),this.shadowRoot.getSelection){var n=document.createRange();n.selectNodeContents(t),this.shadowRoot.getSelection().removeAllRanges(),this.shadowRoot.getSelection().addRange(n)}else try{document.execCommand("selectAll",!1,null)}catch(e){console.warn(e)}}},{key:"monitorTitle",value:function(e){if("Enter"===e.key){e.target.classList.remove("shown"),e.target.previousElementSibling.classList.add("shown"),e.target.removeAttribute("contenteditable");for(var t=e.target.closest("[data-item-id]").getAttribute("data-item-id"),n=0;n<this.items.length;n++)this.items[n].id===t&&""!=e.target.innerText&&(this.items[n].new||(this.items[n].modified=!0),this.items[n].title=e.target.innerText);this.requestUpdate()}}},{key:"monitorHeading",value:function(e){if("Enter"===e.key){e.target.classList.remove("shown"),e.target.previousElementSibling.classList.add("shown"),e.target.removeAttribute("contenteditable");var t=e.target.closest("[data-content-parent-id]"),n=t.getAttribute("data-content-parent-id"),i=parseInt(t.getAttribute("data-node-index")),o=this.items.find((function(e){return e.id===n}));if(o.contents){var r=document.createElement("div");r.innerHTML=o.contents;for(var a="",s=0;s<r.childNodes.length;s++){var l=r.childNodes[s];s<i?a+=l.outerHTML:s===i?(l.innerText=e.target.innerText,a+=l.outerHTML):a+=l.outerHTML}o.contents=a,this.resetPopOver(),this.requestUpdate()}}}},{key:"monitorEsc",value:function(e){"Escape"===e.key?(e.target.classList.remove("shown"),e.target.removeAttribute("contenteditable"),e.target.previousElementSibling.classList.add("shown"),e.target.innerText=e.target.previousElementSibling.innerText):"Enter"===e.key&&(this._blurBlock=!0)}},{key:"blurTitle",value:function(e){var t=this;this._blurBlock||(e.target.classList.remove("shown"),e.target.removeAttribute("contenteditable"),e.target.previousElementSibling.classList.add("shown"),e.target.innerText=e.target.previousElementSibling.innerText),setTimeout((function(){t._blurBlock=!1}),0)}},{key:"_mouseDownDrag",value:function(e){var t=this,n=e.target.closest("[data-item-id]").getAttribute("data-item-id");this.items.map((function(e,i){e.id===n&&t.hasChildren(e.id)&&(t.items[i].collapsed=!0)})),setTimeout((function(){t.requestUpdate()}),0)}},{key:"_dragEnter",value:function(e){this._targetDrop!==e.target.closest("[data-item-id]")&&(e.preventDefault(),e.target.closest("[data-item-id]").classList.add("outline-designer-hovered"),this._targetDrop=e.target.closest("[data-item-id]"))}},{key:"_dragLeave",value:function(e){this._targetDrop!==e.target.closest("[data-item-id]")&&e.target.closest("[data-item-id]").classList.remove("outline-designer-hovered")}},{key:"_dragEnd",value:function(e){if(this._targetDrag&&this._targetDrop){for(var t=null,n=null,i=0;i<this.items.length;i++){var o=this.items[i];o.id===this._targetDrop.getAttribute("data-item-id")&&(t=i),o.id===this._targetDrag.getAttribute("data-item-id")&&(n=i)}null!==n&&null!==t&&(this.items[n].new||(this.items[n].modified=!0),this.items[n].order=this.items[t].order,0===this.items[n].order&&(this.items[n].order=-1),this.items[n].indent=this.items[t].indent,this.items[n].parent=this.items[t].parent,this.hasChildren(this.items[n].id)&&(this.items[n].collapsed=!1)),this._targetDrag=null,this._targetDrop=null,this.setAttribute("stop-animation","true"),this.__syncUIAndDataModel()}}},{key:"_dragStart",value:function(e){if(null==e.target.getAttribute("disabled")){var t=e.target.closest("[data-item-id]");this._targetDrop=null,this._targetDrag=t,this._mouseDownDrag(e),e.dataTransfer&&(e.dataTransfer.effectAllowed="move",e.dataTransfer.dropEffect="move",e.dataTransfer.setDragImage(t,24,16)),e.stopPropagation(),e.stopImmediatePropagation()}}},{key:"updated",value:function(e){var t=this;L(y(h.prototype),"updated",this).call(this,e),e.forEach((function(e,n){"fidelity"===n&&t[n]&&t[n],"activePreview"===n&&e&&e.classList.remove("active-preview-item"),"activePreview"===n&&t[n]&&t[n].classList.add("active-preview-item")}))}},{key:"firstUpdated",value:function(e){var t=this;L(y(h.prototype),"firstUpdated",this)&&L(y(h.prototype),"firstUpdated",this).call(this,e),this.items&&setTimeout((function(){t.__syncUIAndDataModel()}),0)}},{key:"addItemToTop",value:function(){this.setAttribute("stop-animation","true"),this.addNewItem("top"),this.__syncUIAndDataModel()}},{key:"getData",value:(u=g(f().mark((function e(){var t,n,i,o;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((t=this.eventData).items=j(this.items),!this.storeTools){e.next=8;break}return n=this.shadowRoot.querySelector("#itemselector").value,i=this.shadowRoot.querySelector("#targetselector").value,o=0,e.next=8,t.items.map(function(){var e=g(f().mark((function e(a,s){var l;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n||null!=a.parent){e.next=16;break}return o++,e.next=4,r.store.findItemAsObject(n);case 4:l=e.sent,e.t0=i,e.next="below"===e.t0?8:"above"===e.t0?11:"children"===e.t0?14:16;break;case 8:return t.items[s].parent=l.parent,t.items[s].order=parseInt(l.order)+o,e.abrupt("break",16);case 11:return t.items[s].parent=l.parent,t.items[s].order=parseInt(l.order)-o,e.abrupt("break",16);case 14:return t.items[s].parent=n,e.abrupt("break",16);case 16:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}());case 8:return e.abrupt("return",t);case 9:case"end":return e.stop()}}),e,this)}))),function(){return u.apply(this,arguments)})},{key:"isLocked",value:function(e){return!!(!1!==e&&this.items[e]&&this.items[e].metadata&&this.items[e].metadata.locked)}},{key:"addNewItem",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],o=1;"top"===e&&(e=0,o=-1);var r={indent:0,parent:null,order:0};this.items&&this.items.length>0&&this.items[e]&&(r=this.items[e]);var a=new s.JSONOutlineSchemaItem;if(a.order=r.order+o,a.parent=r.parent,a.indent=r.indent,a.metadata.locked=!1,a.new=!0,n?(a.title="".concat(this.t.copyOf," ").concat(r.title),a.contents=r.contents,a.duplicate=r.id):a.contents="<p></p>",i.push(a),this.items&&this.items.length>0&&this.items[e]&&this.hasChildren(this.items[e].id)&&n){var l={};l[this.items[e].id]=a.id,i=this.recurseCopyChildren(this.items[e].id,l,i)}this.items&&this.items.length>0?i.forEach((function(n,i){return t.items.splice(e+i+1,0,n)})):i.forEach((function(e){return t.items.push(e)}))}},{key:"recurseCopyChildren",value:function(e,t,n){for(var i=this.items.filter((function(t){return t.parent==e})),o=0;o<i.length;o++){var r=i[o],a=new s.JSONOutlineSchemaItem;a.order=r.order,a.parent=t[r.parent],a.indent=r.indent,a.metadata.locked=!1,a.new=!0,a.title="".concat(this.t.copyOf," ").concat(r.title),a.contents=r.contents,a.collapsed=r.collapsed,a.duplicate=i[o].id,t[i[o].id]=a.id,n.push(a),this.hasChildren(i[o].id)&&this.recurseCopyChildren(i[o].id,t,n)}return n}},{key:"recurseAction",value:function(e,t){for(var n=this,i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],o=this.items.filter((function(t){return t.parent==e})),r=function(e){n.items.map((function(r,a){if(r.id===o[e].id)switch(t){case"delete":n.items[a].delete=i;break;case"lock":n.items[a].metadata.locked=i}})),n.hasChildren(o[e].id)&&n.recurseAction(o[e].id,t,i)},a=0;a<o.length;a++)r(a);return!0}},{key:"itemOp",value:function(e,t){var n=this;if(!1!==e&&this.items[e]&&t){if(this.items[e].metadata.locked)"lock"===t&&(this.items[e].metadata.locked=!1,this.hasChildren(this.items[e].id)&&this.recurseAction(this.items[e].id,t,this.items[e].metadata.locked));else switch(t){case"lock":this.items[e].metadata.locked=!0,this.hasChildren(this.items[e].id)&&this.recurseAction(this.items[e].id,t,this.items[e].metadata.locked);break;case"delete":this.items[e].delete?this.items[e].delete=!1:this.items[e].delete=!0,this.hasChildren(this.items[e].id)&&this.recurseAction(this.items[e].id,t,this.items[e].delete);break;case"add":this.setAttribute("stop-animation","true"),this.addNewItem(e);break;case"duplicate":this.setAttribute("stop-animation","true"),this.addNewItem(e,!0);break;case"in":if(0!==e&&this.items[e].parent!=this.items[e-1].id){var i=this.items[e-1];this.items[e].parent=i.id,this.items[e].order=0,this.items[e].indent=parseInt(i.indent)+1,this.items[e].new||(this.items[e].modified=!0)}break;case"out":if(null!==this.items[e].parent){var o=this.items.find((function(t){return n.items[e].parent===t.id}));this.items[e].parent=o.parent,this.items[e].order=parseInt(o.order)+1,this.items[e].indent=parseInt(o.indent),this.items[e].new||(this.items[e].modified=!0)}break;case"up":case"down":this.setAttribute("stop-animation","true");var r=this.items[e],a=[];this.items.map((function(e){e.parent===r.parent&&a.push(e)})),a.sort((function(e,t){return e.order<t.order?-1:e.order>t.order?1:0}));var s=null;if(a.map((function(e,n){"up"===t&&n>0&&e.id===r.id?s=a[n-1]:"down"===t&&n<a.length-1&&e.id===r.id&&(s=a[n+1])})),s){var l=parseInt(s.order+".0"),c=parseInt(r.order+".0");this.items.map((function(e,t){e.id===s.id?(n.items[t].order=c,n.items[t].new||(n.items[t].modified=!0)):e.id===r.id&&(n.items[t].order=l,n.items[t].new||(n.items[t].modified=!0))}))}}this.__syncUIAndDataModel()}}},{key:"_recurseUpdateIndent",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{id:null},n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this.items.map((function(i,o){i.parent==t.id&&(e.items[o].indent=n,e._recurseUpdateIndent(e.items[o],n+1))}))}},{key:"_schemaOrderUpdate",value:function(){var e=new l.JsonOutlineSchema,t=e.itemsToNodes(this.items),n=e.nodesToItems(t),i=[];for(var o in n){var r=this.items.find((function(e){return e.id===n[o].id}));r&&(delete r.children,i.push(r))}this.items=i}}],d=[{key:"styles",get:function(){return[t.css(z||(z=T(['\n        :host {\n          display: block;\n        }\n        simple-icon-button[hidden] {\n          visibility: hidden !important;\n          opacity: 0;\n          pointer-events: none;\n          padding: 0;\n          margin: 0;\n          height: 0;\n          border: 0;\n        }\n        .controls {\n          position: sticky;\n          top: -32px;\n          background-color: white;\n          z-index: 1;\n          padding: 16px 0 8px 0;\n        }\n        .controls .control {\n          border: 1px solid black;\n          border-radius: 0;\n          padding: 4px;\n        }\n        simple-popover {\n          --simple-popover-max-height: 300px;\n        }\n        simple-popover *:not(.close-btn) {\n          max-width: 40vw;\n        }\n        simple-popover::part(simple-popover-content) {\n          overflow: auto;\n        }\n        .close-btn {\n          z-index: 1000;\n          background-color: white;\n          border: 0px;\n          border-radius: 50%;\n          position: absolute;\n          top: 24px;\n          right: 0;\n        }\n        .container {\n          text-align: left;\n        }\n        ul {\n          list-style: none;\n          padding: 0;\n          margin: 0;\n        }\n        ul li {\n          margin: 0;\n          padding: 0;\n        }\n        .operation {\n          display: inline-flex;\n          --simple-icon-width: 24px;\n          --simple-icon-height: 24px;\n          margin: 0 4px;\n        }\n        .content-adding-operations .operation {\n          display: inline-flex;\n          --simple-icon-width: 24px;\n          --simple-icon-height: 24px;\n          margin: 0 4px;\n          border: 1px solid black;\n          border-radius: 0;\n          padding: 4px;\n        }\n        .lock {\n          margin-right: 16px !important;\n          visibility: var(--outline-designer-lock-visibility);\n        }\n        .del {\n          margin-left: 32px !important;\n        }\n        .add {\n          margin-left: 16px !important;\n        }\n        li .operations {\n          justify-content: space-evenly;\n          display: flex;\n        }\n        .content-operation {\n          display: inline-flex;\n          opacity: 0;\n          visibility: hidden;\n          --simple-icon-width: 24px;\n          --simple-icon-height: 24px;\n          margin: 0 4px;\n        }\n        .content-operations {\n          justify-content: space-evenly;\n          display: flex;\n        }\n        li.content-child:hover .content-operation {\n          visibility: visible;\n          opacity: 1;\n        }\n        li[class*="collapsed-by-"] {\n          opacity: 0;\n          height: 0px !important;\n          visibility: hidden;\n          padding: 0px !important;\n          margin: 0px !important;\n          width: 0px !important;\n          padding: 0px !important;\n          margin: 0px !important;\n          border: 0px !important;\n          pointer-events: none;\n          z-index: -1;\n        }\n        /* content not rendered if hidden but in case we change that */\n        li[data-contents-collapsed] {\n          opacity: 0;\n          height: 0px !important;\n          visibility: hidden;\n          padding: 0px !important;\n          margin: 0px !important;\n          width: 0px !important;\n          padding: 0px !important;\n          margin: 0px !important;\n          border: 0px !important;\n          pointer-events: none;\n          z-index: -1;\n        }\n        li simple-icon-button:hover {\n          background-color: #f5f5f5;\n        }\n        .active-preview-item {\n          outline: 1px solid grey;\n          outline-offset: -1px;\n        }\n        .label,\n        .label-edit {\n          display: none;\n        }\n        span[disabled].label {\n          pointer-events: none;\n          opacity: 0.6;\n        }\n        .shown {\n          display: inline-block;\n        }\n        .outline-designer-hovered {\n          outline: 2px solid black;\n          outline-offset: -1px;\n          background-color: #e5e5e5;\n        }\n        .make-child-btn {\n          transition: 0.3s all ease-in-out;\n          visibility: hidden;\n          opacity: 0;\n        }\n        .outline-designer-hovered .make-child-btn {\n          visibility: visible;\n          opacity: 0.6;\n        }\n        .outline-designer-hovered .make-child-btn:hover {\n          opacity: 1;\n        }\n        .modified .label::after {\n          content: "*";\n          color: red;\n          font-size: 20px;\n          line-height: 20px;\n        }\n        .new {\n          --simple-icon-width: 16px;\n          --simple-icon-height: 16px;\n          background-color: black;\n          display: block;\n          margin: -14px 0 0 4px;\n        }\n        :host([stop-animation]) .item {\n          transition: none !important;\n        }\n        .item {\n          display: -webkit-box;\n          border: 1px solid;\n          border-color: grey;\n          margin: 0;\n          padding: 4px;\n          cursor: pointer;\n          opacity: 1;\n          visibility: visible;\n          height: 42px;\n          transition: 0.3s padding ease-in-out, 0.3s border ease-in-out,\n            0.3s margin ease-in-out;\n          overflow: hidden;\n          align-items: center;\n          justify-content: left;\n          display: flex;\n        }\n        .collapse-btn {\n          visibility: hidden;\n        }\n        .item[data-has-children] .collapse-btn {\n          visibility: visible;\n        }\n        .item[data-about-to-delete] {\n          background-color: #ffa5a5;\n          opacity: 0.5;\n          border-color: red;\n        }\n        .item[data-about-to-delete][hidden] {\n          visibility: hidden !important;\n          opacity: 0 !important;\n          padding: 0;\n          margin: 0;\n          height: 0;\n          border: 0;\n        }\n        .item:hover,\n        .item:focus {\n          background-color: #f5f5f5;\n        }\n        ul {\n          list-style: none;\n        }\n        .item .label-edit,\n        .item .label {\n          cursor: text;\n          font-size: 14px;\n          font-weight: bold;\n          min-width: 200px;\n          margin-right: 8px;\n          max-width: 40%;\n          line-height: 1.2;\n          padding: 0 4px;\n        }\n\n        .content-child {\n          margin-left: 46px;\n          padding: 8px;\n          height: 24px;\n          border-top: none;\n          border-bottom: none;\n        }\n        .content-heading,\n        .content-non-heading {\n          margin-left: 32px;\n        }\n        .indent-0 {\n          padding-left: 0;\n        }\n        .indent-1 {\n          padding-left: 16px;\n        }\n        .indent-2 {\n          padding-left: calc(16px * 2);\n        }\n        .indent-3 {\n          padding-left: calc(16px * 3);\n        }\n        .indent-4 {\n          padding-left: calc(16px * 4);\n        }\n        .indent-5 {\n          padding-left: calc(16px * 5);\n        }\n        .indent-6 {\n          padding-left: calc(16px * 6);\n        }\n        .indent-7 {\n          padding-left: calc(16px * 7);\n        }\n        .indent-8 {\n          padding-left: calc(16px * 8);\n        }\n        .indent-9 {\n          padding-left: calc(16px * 9);\n        }\n        .indent-10 {\n          padding-left: calc(16px * 10);\n        }\n        .indent-11 {\n          padding-left: calc(16px * 11);\n        }\n        .indent-12 {\n          padding-left: calc(16px * 12);\n        }\n        .indent-13 {\n          padding-left: calc(16px * 13);\n        }\n        .indent-14 {\n          padding-left: calc(16px * 14);\n        }\n        .indent-15 {\n          padding-left: calc(16px * 15);\n        }\n        .indent-16 {\n          padding-left: calc(16px * 16);\n        }\n        .indent-17 {\n          padding-left: calc(16px * 17);\n        }\n        .indent-18 {\n          padding-left: calc(16px * 18);\n        }\n        .indent-19 {\n          padding-left: calc(16px * 19);\n        }\n        .indent-20 {\n          padding-left: calc(16px * 20);\n        }\n      '])))]}},{key:"properties",get:function(){return{haxGizmos:{type:Array},hideDelete:{type:Boolean},activeItemForActions:{type:String},storeTools:{type:Boolean},eventData:{type:Object},items:{type:Array},appReady:{type:Boolean},activePreview:{type:Object},activePreviewIndex:{type:Number},hideContentOps:{type:Boolean,reflect:!0,attribute:"hide-content-ops"},fidelity:{type:String}}}},{key:"tag",get:function(){return"outline-designer"}}],c&&b(n.prototype,c),d&&b(n,d),Object.defineProperty(n,"prototype",{writable:!1}),h}(n.I18NMixin(t.LitElement));customElements.define(F.tag,F),e.OutlineDesigner=F,Object.defineProperty(e,"__esModule",{value:!0})}));
