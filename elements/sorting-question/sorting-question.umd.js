!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@lrnwebcomponents/multiple-choice/lib/confetti-container.js"),require("lit"),require("@lrnwebcomponents/i18n-manager/lib/I18NMixin.js"),require("@lrnwebcomponents/simple-icon/lib/simple-icon-button-lite.js"),require("@lrnwebcomponents/simple-icon/lib/simple-icons.js"),require("@lrnwebcomponents/simple-icon/lib/simple-icon-lite.js")):"function"==typeof define&&define.amd?define(["exports","@lrnwebcomponents/multiple-choice/lib/confetti-container.js","lit","@lrnwebcomponents/i18n-manager/lib/I18NMixin.js","@lrnwebcomponents/simple-icon/lib/simple-icon-button-lite.js","@lrnwebcomponents/simple-icon/lib/simple-icons.js","@lrnwebcomponents/simple-icon/lib/simple-icon-lite.js"],t):t((e="undefined"!=typeof globalThis?globalThis:e||self).SortingQuestion={},e.$$0,e.lit,e.I18NMixin_js)}(this,(function(e,t,n,r){"use strict";function o(e){if(e&&e.__esModule)return e;var t=Object.create(null);return e&&Object.keys(e).forEach((function(n){if("default"!==n){var r=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(t,n,r.get?r:{enumerable:!0,get:function(){return e[n]}})}})),t.default=e,Object.freeze(t)}var i,c,s=o(t);function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){h(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function d(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,k(r.key),r)}}function p(e,t,n){return t&&d(e.prototype,t),n&&d(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function h(e,t,n){return(t=k(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function f(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&y(e,t)}function b(e){return b=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},b(e)}function y(e,t){return y=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},y(e,t)}function m(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function g(e,t){if(t&&("object"==typeof t||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return m(e)}function w(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=b(e);if(t){var o=b(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return g(this,n)}}function v(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=b(e)););return e}function x(){return x="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=v(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},x.apply(this,arguments)}function O(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}function k(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}var j,S,P=function(e){f(r,e);var t=w(r);function r(){var e;return u(this,r),(e=t.call(this)).option="option",e.setAttribute("draggable",!0),e.addEventListener("mousedown",e.getCurrentPosition),e.addEventListener("drag",e.dragStart),e.addEventListener("dragend",e.dragEnd),e.addEventListener("mouseup",e.dragEnd),e}return p(r,[{key:"getCurrentPosition",value:function(){if(!this.disabled){this.style.backgroundColor="darkgray",this.removeAttribute("correct"),this.removeAttribute("incorrect");var e=window.event.clientY;this.currentPosition=e}}},{key:"dragStart",value:function(){if(!this.disabled){var e=30;this.querySelectorAll("img").length>0&&(e=70);var t=window.event.clientY;0!=t&&t>0&&(this.dragPosition=t);var n=this,r=this.parentNode;if(this.dragPosition+e<this.currentPosition){for(var o=0;o<r.children.length;o++)r.children[o].isEqualNode(n)&&(i=o);if(0!=i)return r.insertBefore(n,r.children[i-1]),void(this.currentPosition=this.dragPosition)}if(this.dragPosition-e>this.currentPosition){var i;for(o=0;o<r.children.length;o++)r.children[o].isEqualNode(n)&&(i=o);if(i!=r.children.length-1)return r.insertBefore(r.children[i+1],n),void(this.currentPosition=this.dragPosition)}}}},{key:"dragEnd",value:function(){this.disabled||(this.style.backgroundColor="white")}},{key:"upArrowSort",value:function(e){if(!this.disabled){var t,n=e.parentNode;n.childNodes.forEach((function(e){"SORTING-OPTION"===e.tagName&&(e.style.backgroundColor="white")})),this.style.backgroundColor="darkgray";for(var r=0;r<n.children.length;r++)n.children[r].isEqualNode(e)&&(t=r);if(0!=t)return n.insertBefore(e,n.children[t-1]),void this.shadowRoot.querySelector("#upArrow").focus()}}},{key:"downArrowSort",value:function(e){if(!this.disabled){var t,n=e.parentNode;n.childNodes.forEach((function(e){"SORTING-OPTION"===e.tagName&&(e.style.backgroundColor="white")})),this.style.backgroundColor="darkgray";for(var r=0;r<n.children.length;r++)n.children[r].isEqualNode(e)&&(t=r);if(t!=n.children.length-1)return void n.insertBefore(n.children[t+1],e)}}},{key:"firstUpdated",value:function(e){x(b(r.prototype),"firstUpdated",this)&&x(b(r.prototype),"firstUpdated",this).call(this,e);var t=this;this.shadowRoot.querySelector("#upArrow").addEventListener("click",(function(){t.upArrowSort(t)})),this.shadowRoot.querySelector("#upArrow").addEventListener("keypress",(function(e){"Enter"===e.key&&t.upArrowSort(t)})),this.shadowRoot.querySelector("#downArrow").addEventListener("click",(function(){t.downArrowSort(t)})),this.shadowRoot.querySelector("#downArrow").addEventListener("keypress",(function(e){"Enter"===e.key&&t.downArrowSort(t)}))}},{key:"render",value:function(){return n.html(i||(i=O(['\n    <div class="feedback-container">\n      <simple-icon-lite id="correct-icon" icon="check" alt="correct answer"></simple-icon-lite>\n      <simple-icon-lite id="incorrect-icon" icon="clear" alt="incorrect answer"></simple-icon-lite>\n    </div>\n    <button tabindex="-1" class="option-slot-wrapper"><slot></slot></button>\n    <div class="arrow-container">\n      <simple-icon-button-lite id="upArrow" icon="arrow-upward" @click="','" alt="up arrow click me to move the option up"></simple-icon-button-lite>\n      <simple-icon-button-lite id="downArrow" icon="arrow-downward" @click="','" alt="down arrow click me to move the option down"></simple-icon-button-lite>\n    </div>\n    '])),this.upArrowSort,this.downArrowSort)}}],[{key:"tag",get:function(){return"sorting-option"}},{key:"properties",get:function(){return{disabled:{type:Boolean}}}},{key:"styles",get:function(){return n.css(c||(c=O(["\n    :host {\n      border: 2px black solid;\n      border-radius: 5px;\n      width: 95%;\n      margin-top: 5px;\n      margin-bottom: 5px;\n      height: 100%;\n      min-height: 25px;\n      display: flex;\n      align-items: center;\n      box-shadow: 1px 1px 1px;\n      cursor: grab;\n      z-index: 1;\n      background-color: var(--option-background-color,white);\n      overflow: hidden;\n\n      \n    }\n\n    :host([correct]){\n      transition: background-color 0.7s linear;\n      background-color: var(--option-background-color-correct,#3deb3dcc) !important;\n    }\n\n    :host([incorrect]){\n      transition: background-color 0.7s linear;\n      background-color: var(--option-background-color-incorrect,#f94343f7) !important;\n    }\n\n    \n\n  \n    .option-slot-wrapper{\n      display: flex;\n      align-items: center;\n      z-index: 2;\n      width: 100%;\n      height: 100%;\n      background-color: transparent;\n      border: none;\n      text-align: inherit;\n      font-weight: bold;\n    }\n    :host button{\n      cursor: grab;\n      font-weight: bold;\n    }\n    :host button:active {\n      cursor: grabbing;\n    }\n\n    ::slotted(*){\n     \n     max-height: 75px;\n      \n    }\n\n   \n\n\n    .arrow-container{\n      display: flex;\n      justify-content: flex-end;\n      padding-right: 5px;\n      position: relative;\n      right: 0px;\n      width: 20%;\n      height: 100%;\n      background-color: transparent;\n      align-items: center;\n    }\n\n    .arrow{\n      height: 15px;\n      width: 15px;\n      border-style: solid;\n      border-width: 1px;\n      border-color: black;\n      cursor: pointer;\n      margin-left: 1px;\n      margin-right: 1px;\n      border-radius: 5px;\n      box-shadow: 0px 0px 1px 0px;\n    }\n    \n    .up-arrow{\n      transform: rotate(270deg);\n    }\n    \n    .down-arrow{\n      transform: rotate(90deg);\n    }\n\n\n    .feedback-container{\n      width: fit-content;\n      display: flex;\n      height: 100%;\n      align-items: center;\n      padding-left: 5px;\n      background-color: transparent;\n    }\n\n    \n    \n    #correct-icon{\n      display: none;\n      height: 15px;\n      width: 15px;\n      border-radius: 2px;\n      box-shadow: 0px 1px 1px 0px;\n    }\n\n    #incorrect-icon{\n      display: none;\n      height: 15px;\n      width: 15px;\n      border-radius: 2px;\n      box-shadow: 0px 1px 1px 0px;\n    }\n    "])))}}]),r}(n.LitElement);window.customElements.define(P.tag,P);var R=function(e){f(r,e);var t=w(r);function r(){var e;return u(this,r),(e=t.call(this)).celebrate=!1,e.shame=!1,e.numberOfOptions=e.children.length,e.numberCorrrect=0,e.correctOrder=[],e.mute=!1,e.noBackground=!1,e.question="Sort the following in order!",e.t={numCorrectLeft:"You Have",numCorrectRight:"Correct.",submit:"Submit",reset:"Reset"},e.registerLocalization({context:m(e),localesPath:new URL("../locales/","undefined"==typeof document&&"undefined"==typeof location?new(require("url").URL)("file:"+__filename).href:"undefined"==typeof document?location.href:document.currentScript&&document.currentScript.src||new URL("sorting-question.umd.js",document.baseURI).href).href,locales:["he","ja","es"]}),e.getCorrectOrder(),setTimeout(e.randomizeOptions(),100),e}return p(r,[{key:"getCorrectOrder",value:function(){var e=this;this.childNodes.forEach((function(t){"SORTING-OPTION"==t.tagName&&e.correctOrder.push(t)}))}},{key:"randomizeOptions",value:function(){for(var e=[],t=0;t<this.numberOfOptions;t++)e.push(t);for(t=0;t<this.numberOfOptions;t++){var n=Math.floor(Math.random()*(this.numberOfOptions-0)+0);void 0===n&&(n=0);var r=this.children[e[n]],o=Math.floor(Math.random()*(e.length-0)+0);void 0===o&&(o=0),this.insertBefore(r,this.children[e[o]])}}},{key:"checkOrder",value:function(){for(var e=0,t=0;t<this.numberOfOptions;t++)this.children[t].isEqualNode(this.correctOrder[t])?(e+=1,this.children[t].removeAttribute("incorrect"),this.children[t].setAttribute("correct",!0),this.children[t].shadowRoot.querySelector("#correct-icon").style.display="flex",this.children[t].shadowRoot.querySelector("#incorrect-icon").style.display="none"):(this.children[t].removeAttribute("correct"),this.children[t].setAttribute("incorrect",!0),this.children[t].shadowRoot.querySelector("#incorrect-icon").style.display="flex",this.children[t].shadowRoot.querySelector("#correct-icon").style.display="none");this.numberCorrrect=e,this.celebrate&&this.celebration(this.numberCorrrect,this.numberOfOptions),this.shame&&this.celebration(this.numberCorrrect,this.numberOfOptions)}},{key:"celebration",value:function(e,t){var n=this;e==t&&Promise.resolve(s).then((function(e){setTimeout((function(){n.shadowRoot.querySelector("#confetti").setAttribute("popped","")}),0)}))}},{key:"reset",value:function(){this.childNodes.forEach((function(e){"SORTING-OPTION"==e.tagName&&(e.shadowRoot.querySelector("#incorrect-icon").style.display="none",e.shadowRoot.querySelector("#correct-icon").style.display="none",e.removeAttribute("incorrect"),e.removeAttribute("correct"))})),this.numberCorrrect=0,this.randomizeOptions()}},{key:"updated",value:function(e){var t=this;e.forEach((function(e,n){if("need"===n&&"joy"===t[n]&&t.classList.add("joyful"),t.disabled){var r=t.shadowRoot.querySelector(".reset-button"),o=t.shadowRoot.querySelector(".submit-button");r.setAttribute("disabled",!0),o.setAttribute("disabled",!0),t.childNodes.forEach((function(e){"SORTING-OPTION"==e.tagName&&(e.setAttribute("disabled",!0),e.setAttribute("draggable",!1),e.removeAttribute("correct"),e.removeAttribute("incorrect"),e.shadowRoot.querySelector("#incorrect-icon").style.display="none",e.shadowRoot.querySelector("#correct-icon").style.display="none",e.style.opacity="0.5")}))}else{r=t.shadowRoot.querySelector(".reset-button"),o=t.shadowRoot.querySelector(".submit-button");r.removeAttribute("disabled"),o.removeAttribute("disabled"),t.childNodes.forEach((function(e){"SORTING-OPTION"==e.tagName&&(e.removeAttribute("disabled"),e.setAttribute("draggable",!0),e.style.opacity="1")}))}"question"==n&&t.requestUpdate()}))}},{key:"firstUpdated",value:function(e){if(x(b(r.prototype),"firstUpdated",this)&&(x(b(r.prototype),"firstUpdated",this).call(this,e),this.disabled)){var t=this.shadowRoot.querySelector(".reset-button"),n=this.shadowRoot.querySelector(".submit-button");t.setAttribute("disabled",!0),n.setAttribute("disabled",!0),this.childNodes.forEach((function(e){"SORTING-OPTION"==e.tagName&&(e.setAttribute("disabled",!0),e.setAttribute("draggable",!1),e.style.opacity="0.5")}))}}},{key:"render",value:function(){return n.html(j||(j=O(['\n      <div class="sorting-question-header">','</div>\n      <confetti-container id="confetti">\n      <div class="options"><slot></slot></div>\n      </confetti-container>\n      <div class="sorting-controls">\n        <span>'," ","/"," ",'</span>\n        <div class="button-container">\n        <simple-icon-button-lite @click="','" class="reset-button" icon="refresh">','</simple-icon-button-lite>\n        <button @click="','" class="submit-button" icon="submit">',"</button>\n        </div>\n      </div>\n    "])),this.question,this.t.numCorrectLeft,this.numberCorrrect,this.numberOfOptions,this.t.numCorrectRight,this.reset,this.t.reset,this.checkOrder,this.t.submit)}}],[{key:"tag",get:function(){return"sorting-question"}},{key:"properties",get:function(){return l(l({},x(b(r),"properties",this)),{},{question:{type:String,reflect:!0},correctOrder:{type:Array},numberOfOptions:{type:Number},numberCorrrect:{type:Number},celebrate:{type:Boolean},shame:{type:Boolean},mute:{type:Boolean},disabled:{type:Boolean},noBackground:{type:Boolean,attribute:"no-background"}})}},{key:"styles",get:function(){return n.css(S||(S=O(["\n\n      :host {\n        background-color: var(--sorting-question-background-color,white);\n        \n        background-position: center;\n        border: 2px solid black;\n        padding: 15px 10px;\n        display: flex;\n        flex-direction: column;\n        border-radius: 10px;\n        box-shadow: 2px 1px 2px -1px black;\n        margin-top: 10px;\n        margin-bottom: 10px;\n        font-weight: bold;\n        height: inherit;\n        width: inherit;\n      }\n\n      .sorting-question-header{\n        text-align: center;\n        font-size: 20px;\n        font-family: revert;\n        margin-bottom: 10px;\n\n      }\n      \n      .options{\n        margin-bottom: 10px;\n      }\n\n      .sorting-controls{\n        display: flex;\n        justify-content: space-between;\n        padding-right: 5%;\n        font-size: 20px;\n        font-family: revert;\n      }\n\n      .submit-button{\n        border-radius: 5px;\n        border-width: 2px;\n        cursor: pointer;\n        background-color: inherit;\n        box-shadow: 1px 1px 1px 0px;\n        font-weight: bold;\n      }\n\n      .submit-button:hover{\n        opacity: 0.8;\n      }\n\n      .submit-button:active{\n        cursor: default;\n      }\n\n      .button-container{\n        display: flex;\n        justify-content: center;\n        align-items: center;\n\n      }\n      \n      .reset-button{\n        margin-right: 5px;\n        border-radius: 5px;\n        padding: 0 4px;\n        background-color: inherit;\n        box-shadow: 1px 1px 1px 0px;\n        cursor: pointer;\n      }\n\n      .reset-button:disabled {\n        opacity: 0.5;\n      }\n\n      .reset-button simple-icon-button{\n        height: inherit;\n        width: inherit;\n        padding: 1px;\n      }\n\n\n    "])))}},{key:"haxProperties",get:function(){return new URL("./lib/".concat(this.tag,".haxProperties.json"),"undefined"==typeof document&&"undefined"==typeof location?new(require("url").URL)("file:"+__filename).href:"undefined"==typeof document?location.href:document.currentScript&&document.currentScript.src||new URL("sorting-question.umd.js",document.baseURI).href).href}}]),r}(r.I18NMixin(n.LitElement));window.customElements.define(R.tag,R),e.SortingQuestion=R,Object.defineProperty(e,"__esModule",{value:!0})}));
